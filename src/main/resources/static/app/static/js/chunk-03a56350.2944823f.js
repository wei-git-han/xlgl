(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03a56350","chunk-407069f1"],{"09f4":function(t,e,l){"use strict";l.d(e,"a",function(){return o}),Math.easeInOutQuad=function(t,e,l,a){return t/=a/2,t<1?l/2*t*t+e:(t--,-l/2*(t*(t-2)-1)+e)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function i(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(t,e,l){var o=s(),n=t-o,r=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=r;var s=Math.easeInOutQuad(c,o,n,e);i(s),c<e?a(t):l&&"function"===typeof l&&l()};u()}},"2cf3":function(t,e,l){},"36d7":function(t,e,l){},"3b70":function(t,e,l){"use strict";var a=l("2cf3"),i=l.n(a);i.a},"9ef8":function(t,e,l){"use strict";l.d(e,"b",function(){return i}),l.d(e,"a",function(){return s});var a=l("b775");function i(t){return Object(a["a"])({url:"/app/xlgl/xlglcarsmanager/getFileList",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/app/xlgl/adminset/list",method:"post",data:t})}},c5f2:function(t,e,l){"use strict";var a=l("36d7"),i=l.n(a);i.a},da66:function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"app-container"},[l("title-card",{attrs:{"title-text":t.cardTitle}}),t._v(" "),l("el-button",{staticStyle:{float:"right",margin:"-40px 30px 0 30px"},attrs:{type:"success",size:"mini"},on:{click:t.openFileDialog}},[t._v("导入")]),t._v(" "),l("el-select",{staticStyle:{float:"right",margin:"-40px 150px 0 0"},attrs:{placeholder:"请选择极度",size:"small"},on:{change:t.selectChange},model:{value:t.listQuery.quarter,callback:function(e){t.$set(t.listQuery,"quarter",e)},expression:"listQuery.quarter"}},[l("el-option",{attrs:{value:"1",label:"第一季度（1月、2月、3月）"}},[t._v("第一季度（1月、2月、3月）")]),t._v(" "),l("el-option",{attrs:{value:"2",label:"第二季度（4月、5月、6月）"}},[t._v("第二季度（4月、5月、6月）")]),t._v(" "),l("el-option",{attrs:{value:"3",label:"第三季度（7月、8月、9月）"}},[t._v("第三季度（7月、8月、9月）")]),t._v(" "),l("el-option",{attrs:{value:"4",label:"第四季度（10月、11月、12月）"}},[t._v("第四季度（10月、11月、12月）")])],1),t._v(" "),l("div",[l("el-scrollbar",{staticClass:"hidden-x",staticStyle:{overflow:"hidden",height:"100%"}},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"",stripe:!0,"highlight-current-row":""},on:{"row-click":t.openDetailPaper}},[l("el-table-column",{attrs:{label:"单位名称","min-width":"300",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",{attrs:{title:e.row.organName}},[t._v(t._s(e.row.topicColumn))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"文件主题",width:"250px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",[t._v(t._s(e.row.content))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"导入时间",width:"250px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",[t._v(t._s(e.row.updateDate))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"导入者",width:"250px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",[t._v(t._s(e.row.uploadUser))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"状态",width:"250px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",[t._v(t._s(t._f("statusFilter")(e.row.status)))])]}}])})],1)],1),t._v(" "),l("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getSearchList}})],1),t._v(" "),l("el-dialog",{attrs:{title:"上传附件",visible:t.fileDialog,width:"40%","before-close":t.closeFileDialog},on:{"update:visible":function(e){t.fileDialog=e}}},[l("el-form",{staticClass:"oraganForm",attrs:{"label-width":"180px",inline:!0}},[l("el-row",[l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"发布单位：",prop:"type"}},[l("el-input",{attrs:{readonly:""},model:{value:t.listQuery.depart,callback:function(e){t.$set(t.listQuery,"depart",e)},expression:"listQuery.depart"}})],1)],1),t._v(" "),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"导入主题"}},[l("el-input",{model:{value:t.listQuery.content,callback:function(e){t.$set(t.listQuery,"content",e)},expression:"listQuery.content"}})],1)],1)],1)],1),t._v(" "),l("div",{staticClass:"centerPosition"},[l("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"","auto-upload":!1,"with-credentials":!0,action:t.fileUploadUrl,data:t.fileData,"on-success":t.successFile,"on-error":t.errorFile}},[l("i",{staticClass:"el-icon-upload"}),t._v(" "),l("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),l("em",[t._v("点击上传")])]),t._v(" "),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("支持上传excel等格式")])])],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"primary"},on:{click:t.submitFile}},[t._v("确 定")]),t._v(" "),l("el-button",{on:{click:t.closeFileDialog}},[t._v("取 消")])],1)],1),t._v(" "),t.detailFlag?l("detail-file"):t._e()],1)},i=[],s=l("35b7"),o=l("ed02"),n=l("333d"),r=l("b775");function c(t){return Object(r["a"])({url:"/app/xlgl/xlglsafetyanalyse/list",method:"post",data:t})}var u={name:"SafetySpecification",components:{TitleCard:s["a"],detailFile:o["default"],Pagination:n["a"]},filters:{statusFilter:function(t){return 0===t?"未上传":"已上传"}},data:function(){return{cardTitle:"安全分析与预案",fileDialog:!1,detailFlag:!1,listQuery:{quarter:"1",depart:this.$store.state.user.userInfo.orgName,content:"",page:1,limit:20},tableKey:0,list:null,total:0,listLoading:!1,fileUploadUrl:"/app/xlgl/xlglsafetyanalyse/uploadPicture",fileData:{access_token:this.$store.state.user.token,content:""}}},created:function(){this.getSearchList()},methods:{getSearchList:function(){var t=this;this.listLoading=!0,c(this.listQuery).then(function(e){t.list=e.data.list,t.total=e.data.totalCount,setTimeout(function(){t.listLoading=!1},1500)})},selectChange:function(){this.getSearchList()},openFileDialog:function(){this.fileDialog=!0},closeFileDialog:function(){this.$refs.upload.clearFiles(),this.fileDialog=!1},submitFile:function(){this.fileData.content=this.listQuery.content,this.$refs.upload.submit()},successFile:function(t){var e=this;this.$message({type:"success",message:"上传成功!",onClose:function(){e.getSearchList(),e.closeFileDialog()}})},errorFile:function(){this.$message({type:"info",message:"上传失败!"})},openDetailPaper:function(t,e,l){this.detailFlag=!0}}},d=u,f=(l("3b70"),l("2877")),p=Object(f["a"])(d,a,i,!1,null,"ccabcb56",null);e["default"]=p.exports},ed02:function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"app-container"},[l("div",{staticStyle:{height:"30px"}},[l("svg-icon",{staticClass:"icon",staticStyle:{float:"right",cursor:"pointer"},attrs:{"icon-class":"goback"},on:{click:t.goBack}})],1),t._v(" "),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:16}},[l("div",{staticClass:"div1"},[l("iframe",{attrs:{src:t.onlineFileUrl,frameborder:"0",width:"100%",height:"100%"}})])]),t._v(" "),l("el-col",{attrs:{span:8}},[l("div",{staticClass:"div1"},[l("div",{staticStyle:{"margin-bottom":"10px"}},[l("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.openDialog}},[t._v("上传")])],1),t._v(" "),l("div",{staticClass:"div2"},[l("el-scrollbar",{staticClass:"hidden-x",staticStyle:{overflow:"hidden",height:"100%"}},[l("el-table",{key:t.tableKey,attrs:{data:t.fileList,border:"",fit:"","highlight-current-row":""},on:{"row-click":t.handleCurrent}},[l("el-table-column",{attrs:{label:"文件名",align:"center","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[l("span",[t._v(t._s(a.examineName))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"上传时间",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[l("span",[t._v(t._s(a.examineSubjectName))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"上传人",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[l("span",[t._v(t._s(a.updateDate))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"操作",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[l("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleModifyStatus(a,"delete")}}},[t._v("删除")])]}}])})],1)],1)],1)])])],1),t._v(" "),l("el-dialog",{attrs:{title:"上传附件",visible:t.fileDialog,width:"40%","before-close":t.closeFileDialog},on:{"update:visible":function(e){t.fileDialog=e}}},[l("div",{staticClass:"centerPosition"},[l("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"","auto-upload":!1,"with-credentials":!0,action:t.fileUploadUrl,data:t.fileData,"on-success":t.successFile,"on-error":t.errorFile}},[l("i",{staticClass:"el-icon-upload"}),t._v(" "),l("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),l("em",[t._v("点击上传")])]),t._v(" "),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("支持上传word、excel、ofd等格式")])])],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"primary"},on:{click:t.submitFile}},[t._v("确 定")]),t._v(" "),l("el-button",{on:{click:t.closeFileDialog}},[t._v("取 消")])],1)])],1)},i=[],s=l("9ef8"),o={name:"DetailFiles",props:{fileList:{type:Array,default:function(){return[]}}},data:function(){return{tableKey:0,fileDialog:!1,fileData:{access_token:this.$store.state.user.token},fileUploadUrl:"",onlineFileUrl:"/app/openFile/demo.html"}},mounted:function(){this.$refs.filetable.setCurrentRow(this.fileList[0])},methods:{handleCurrent:function(t){this.$refs.filetable.setCurrentRow(t)},handleModifyStatus:function(t,e){var l=this;Object(s["a"])({ids:t.id}).then(function(t){0===t.data.code?l.$message({type:"success",message:"删除成功!",onClose:function(){l.getTestList()}}):l.$message({type:"info",message:t.data.msg})})},openDialog:function(){this.fileDialog=!0},closeFileDialog:function(){this.$refs.upload.clearFiles(),this.fileDialog=!1},submitFile:function(){this.$refs.upload.submit()},successFile:function(t){var e=this;this.$message({type:"success",message:"上传成功!",onClose:function(){e.$parent.getCarFileList()}})},errorFile:function(){this.$message({type:"info",message:"上传失败!"})},goBack:function(){}}},n=o,r=(l("c5f2"),l("2877")),c=Object(r["a"])(n,a,i,!1,null,"2ce845b9",null);e["default"]=c.exports}}]);