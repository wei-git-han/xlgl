(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35d43dd6"],{"000b":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[0===t.isShow?i("div",{staticClass:"app-content"},[i("title-card",{attrs:{"title-text":"战略训练"}}),t._v(" "),i("div",{staticStyle:{position:"absolute",right:"40px",top:"20px"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"==t.isManager,expression:"isManager=='1'"}],staticClass:"addBtn noBorder",attrs:{type:"success",size:"mini",icon:"el-icon-plus"},on:{click:t.addPage}},[t._v("新增")])],1),t._v(" "),i("div",{staticStyle:{"margin-top":"15px"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px","margin-left":"25px"},attrs:{size:"small",placeholder:"输入训练名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"25px"},attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.search}},[t._v("查询")])],1),t._v(" "),i("el-row",[i("el-col",{staticClass:"elColStyle",attrs:{span:24}},[i("el-scrollbar",{staticClass:"hidden-x"},[i("el-row",{attrs:{gutter:20}},[i("div",{staticClass:"videoList"},t._l(t.videoList,function(e,a){return i("div",{key:a,staticClass:"videoCard",on:{click:function(i){return t.toDetial(e)}}},[i("span",{class:["learnLabel","1"==e.readStatus?"bg_active":"bg_default"]},[t._v(t._s("1"==e.readStatus?"已学习":"待学习"))]),t._v(" "),i("div",{staticStyle:{position:"relative",width:"100%",height:"170px",background:"#F9FBFE"}},[e.videoFile?i("video",{staticClass:"imgStyle",staticStyle:{"object-fit":"fill"},attrs:{controls:"controls",poster:"/app/xlgl/xlgldocumentfile/downLoad?fileId="+e.coverFile}},[i("source",{attrs:{src:"/app/xlgl/xlgldocumentfile/downLoad?fileId="+e.videoFile}})]):e.coverFile?i("img",{staticClass:"imgStyle",attrs:{src:"/app/xlgl/xlgldocumentfile/downLoad?fileId="+e.coverFile}}):i("svg-icon",{staticClass:"icon",staticStyle:{width:"50%",height:"50%","margin-top":"12.5%","margin-left":"25%"},attrs:{"icon-class":"zanwushuju"}})],1),t._v(" "),i("p",{staticClass:"cardTitle",attrs:{title:e.tacticTitle}},[t._v(t._s(e.tacticTitle))]),t._v(" "),i("p",{staticStyle:{color:"#99A6BF",padding:"0 10px"}},[t._v(t._s(e.viewNumber)+"次浏览")])])}),0)])],1)],1)],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getTacticList}})],1):1===t.isShow?i("addPage",{attrs:{id:t.fileId},on:{back:t.backList}}):2===t.isShow?i("detailPage",{attrs:{id:t.fileId,"is-manager":t.isManager},on:{back:t.backList}}):t._e()],1)},l=[],s=i("35b7"),o=i("333d"),n=i("f069"),c=i("dac6"),r=i("0fe1"),d={components:{TitleCard:s["a"],Pagination:o["a"],addPage:n["default"],detailPage:c["default"]},data:function(){return{listQuery:{page:1,limit:10,title:""},total:0,states:[1,2,3],topicType:[1,2,3],videoList:[],isShow:0,fileId:"",isManager:this.$store.state.user.userInfo.adminFlag}},watch:{isShow:function(t){0===t&&this.getTacticList()}},created:function(){this.getTacticList()},methods:{getTacticList:function(){var t=this;Object(r["O"])(this.listQuery).then(function(e){t.videoList=e.data.page.list,t.total=e.data.page.totalCount})},search:function(){this.getTacticList()},backList:function(t,e){this.isShow=t,this.fileId=e},addPage:function(){this.isShow=1},toDetial:function(t){this.isShow=2,this.fileId=t.id}}},u=d,p=(i("3b81"),i("2877")),f=Object(p["a"])(u,a,l,!1,null,"797ad599",null);e["default"]=f.exports},1228:function(t,e,i){},"3b81":function(t,e,i){"use strict";var a=i("1228"),l=i.n(a);l.a},a536:function(t,e,i){"use strict";var a=i("dae8"),l=i.n(a);l.a},dae8:function(t,e,i){},f069:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"app-content"},[i("div",{staticClass:"addTitle"},[i("span",{staticStyle:{color:"#333333","font-size":"16px"}},[t._v(t._s(t.id?"编辑训练":"新增训练"))]),t._v(" "),i("svg-icon",{staticClass:"icon pointer",staticStyle:{"margin-top":"10px"},attrs:{"icon-class":"goback"},on:{click:t.backFn}})],1),t._v(" "),i("el-row",[i("el-col",{staticClass:"elColStyle",attrs:{span:24}},[i("el-scrollbar",{staticClass:"hidden-x"},[i("el-row",{staticStyle:{padding:"20px 0"}},[i("el-col",{attrs:{span:16}},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"150px"}},[i("el-row",[i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"训练标题",prop:"tacticTitle"}},[i("el-input",{model:{value:t.form.tacticTitle,callback:function(e){t.$set(t.form,"tacticTitle",e)},expression:"form.tacticTitle"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:20}},[i("el-form-item",{attrs:{label:"训练内容描述"}},[i("el-col",{attrs:{span:24}},[i("ueditor",{ref:"content",model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1)],1)],1)],1)],1),t._v(" "),i("el-col",{attrs:{span:4}},[i("div",[i("label",{staticStyle:{"font-size":"18px"}},[t._v("上传视频")]),t._v(" "),i("el-upload",{ref:"upload",staticClass:"upload-demo ma-t_15",attrs:{accept:".mp4",drag:"",name:"pdf",action:"/app/xlgl/xlgldocumentfile/upLoadFile","file-list":t.videoList,"on-change":t.handleChangeFile,"on-success":t.uploadVideo,"on-error":t.uploadFailVideo,"on-remove":t.removeVideo,"on-progress":t.loadingFile}},[i("i",{staticClass:"el-icon-upload"}),t._v(" "),i("div",{staticClass:"el-upload__text"},[t._v("\n                    将文件拖到此处，或"),i("em",[t._v("点击上传")]),t._v(" "),i("div",{staticClass:"uploadDescription"},[t._v("注：只能上传.mp4文件格式")])])])],1),t._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[i("label",{staticStyle:{"font-size":"18px"}},[t._v("上传封面")]),t._v(" "),i("el-upload",{ref:"upload",staticClass:"upload-demo ma-t_15",attrs:{accept:".png,.jpeg",drag:"",name:"pdf",action:t.fileUrl,"file-list":t.imgList,"list-type":"picture","on-change":t.handleChangeFile,"on-success":t.uploadImg,"on-remove":t.removeImg}},[i("i",{staticClass:"el-icon-upload"}),t._v(" "),i("div",{staticClass:"el-upload__text"},[t._v("\n                    将文件拖到此处，或"),i("em",[t._v("点击上传")]),t._v(" "),i("div",{staticClass:"uploadDescription"},[t._v("注：只能上传.png/.jpeg等文件格式")])])])],1),t._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[i("label",{staticStyle:{"font-size":"18px"}},[t._v("上传附件")]),t._v(" "),i("el-upload",{staticClass:"upload-demo ma-t_15",attrs:{drag:"",action:t.fileUrl,name:"pdf","on-success":t.uploadFile,"on-remove":t.removeFile,"file-list":t.fileList,multiple:""}},[i("i",{staticClass:"el-icon-upload"}),t._v(" "),i("div",{staticClass:"el-upload__text"},[t._v("\n                    将文件拖到此处，或"),i("em",[t._v("点击上传")]),t._v(" "),i("div",{staticClass:"uploadDescription"},[t._v("注：只能上传word/ppt/excel文件格式")])])])],1)])],1),t._v(" "),i("el-row",[i("el-col",{staticStyle:{"text-align":"center","margin-top":"30px"},attrs:{span:24}},[i("el-button",{attrs:{type:"success",disabled:t.isClick},on:{click:function(e){return t.saveOrUpdateNotice("form")}}},[t._v("发布")]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},on:{click:t.backFn}},[t._v("取消")])],1)],1)],1)],1)],1)],1)])},l=[],s=(i("ac6a"),i("63f4")),o=i("0fe1"),n={name:"CreateNotice",components:{Ueditor:s["a"]},props:{id:{type:String,default:""}},data:function(){return{fileUrl:"/app/xlgl/xlgldocumentfile/upLoadFile",form:{videoFile:"",coverFile:"",tacticTitle:"",content:""},rules:{tacticTitle:[{required:!0,message:"请填写训练标题",trigger:"blur"}]},showImg:!1,fileList:[],fileId:[],videoList:[],imgList:[],textVal:"",isClick:!1}},created:function(){this.id&&this.getTacticInfo()},methods:{getTacticInfo:function(){var t=this;Object(o["N"])({id:this.id,type:"1"}).then(function(e){var i=e.data.xlglWarTactic,a=i.tacticTitle,l=i.coverFile,s=i.videoFile,o=i.content;Object.assign(t.form,{tacticTitle:a,coverFile:l,videoFile:s,content:o}),e.data.xlglWarTactic.videoFile&&t.videoList.push({name:e.data.xlglWarTactic.videoFileName,url:e.data.xlglWarTactic.videoFile}),e.data.xlglWarTactic.coverFile&&t.imgList.push({name:e.data.xlglWarTactic.coverFileName,url:"/app/xlgl/xlgldocumentfile/downLoad?fileId=".concat(e.data.xlglWarTactic.coverFile)}),e.data.xlglWarTactic.accessoryFileArray.forEach(function(e,i){t.fileList.push({name:e.fileName,url:e.fileId}),t.fileId.push(e.fileId)}),t.$refs.content.setContent(t.form.content)})},backFn:function(){this.$emit("back",0)},loadingFile:function(){this.isClick=!0},uploadVideo:function(t){this.form.videoFile=t.fileId,this.isClick=!1},uploadFailVideo:function(){this.$notify({title:"提示",message:"视频上传失败",duration:1500,type:"warning"}),this.isClick=!1},uploadImg:function(t){this.form.coverFile=t.fileId},uploadFile:function(t){this.fileId.push(t.fileId)},removeVideo:function(){this.form.videoFile=""},removeImg:function(){this.form.coverFile=""},handleChangeFile:function(t,e){e.length>1&&e.splice(0,1)},removeFile:function(t){this.fileId.indexOf(t.url)>-1&&this.fileId.splice(t.url,1)},saveOrUpdateNotice:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.id?(e.form.id=e.id,e.form.accessoryFile=e.fileId.join(","),e.form.content=e.$refs.content.getContent(),e.tacticUpdate()):(e.form.accessoryArray=e.fileId.join(","),e.form.content=e.$refs.content.getContent(),e.getTacticSave())})},tacticUpdate:function(){var t=this;Object(o["Fb"])(this.form).then(function(e){"success"===e.data.msg?t.$notify({title:"提示",message:"修改成功",duration:1500,type:"success"}):t.$notify({title:"提示",message:"修改失败",duration:1500,type:"warning"}),t.backFn()})},getTacticSave:function(){var t=this;Object(o["P"])(this.form).then(function(e){"success"===e.data.msg?t.$notify({title:"提示",message:"新增成功",duration:1500,type:"success"}):t.$notify({title:"提示",message:"新增失败",duration:1500,type:"warning"}),t.backFn()})},cancel:function(){var t=this;this.$confirm("确定要取消发送此通知吗，您填写的内容将被清空","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){t.form={}}).catch(function(){})}}},c=n,r=(i("a536"),i("2877")),d=Object(r["a"])(c,a,l,!1,null,"299ebbb2",null);e["default"]=d.exports}}]);