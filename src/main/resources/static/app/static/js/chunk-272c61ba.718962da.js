(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-272c61ba","chunk-2d0cef16"],{6237:function(t,e,s){"use strict";s.d(e,"i",function(){return l}),s.d(e,"d",function(){return a}),s.d(e,"k",function(){return n}),s.d(e,"c",function(){return c}),s.d(e,"f",function(){return r}),s.d(e,"e",function(){return u}),s.d(e,"h",function(){return p}),s.d(e,"j",function(){return o}),s.d(e,"m",function(){return d}),s.d(e,"l",function(){return h}),s.d(e,"a",function(){return m}),s.d(e,"b",function(){return y}),s.d(e,"g",function(){return g});var i=s("b775");function l(t){return Object(i["a"])({url:"/app/xlgl/xlglexamexamine/list",method:"get",params:t})}function a(t){return Object(i["a"])({url:"/app/xlgl/xlglexamexamine/view/examine",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/app/xlgl/xlglexamanswer/saveBatch",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/app/xlgl/xlglexamexamine/conutInto",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/app/xlgl/xlglexammainanswer/list",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/app/xlgl/xlglexamexamine/examineTotal",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/app/xlgl/xlglexamexamine/topicTypeCount",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/app/xlgl/xlglexamexaminemakeup/save",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/app/xlgl/xlglexamexamine/saveOrUpdate",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/app/xlgl/xlglexamanswer/saveBatchLIANXI",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/app/xlgl/sysorgan/currenttree",method:"post",data:t})}function y(t){return Object(i["a"])({url:"/app/xlgl/xlglexamexamine/examAnalyse",method:"post",data:t})}function g(t){return Object(i["a"])({url:"/app/xlgl/xlglexamanswer/getReplyLack",method:"post",data:t})}},"63ab":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"createTest"},[s("title-card",{attrs:{"title-text":t.cardTitle}}),t._v(" "),s("svg-icon",{staticClass:"icon",staticStyle:{float:"right",cursor:"pointer","margin-top":"-30px","margin-right":"20px"},attrs:{"icon-class":"goback"},on:{click:t.goBack}}),t._v(" "),s("div",{staticClass:"pageContent"},[s("el-col",{attrs:{span:10}},[s("el-form",{ref:"form",staticClass:"oraganForm",attrs:{model:t.listQuery,rules:t.rules,"label-width":"150px",inline:!0}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"考试科目选择：",prop:"examineSubjectId"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.listQuery.examineSubjectId,callback:function(e){t.$set(t.listQuery,"examineSubjectId",e)},expression:"listQuery.examineSubjectId"}},t._l(t.subjectListAll,function(t){return s("el-option",{key:t.id,attrs:{label:t.subjectName,value:t.id}})}),1)],1)],1),t._v(" "),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"考试时长：",prop:"examineDate"}},[s("el-input",{attrs:{placeholder:"请输入考试时长"},model:{value:t.listQuery.examineDate,callback:function(e){t.$set(t.listQuery,"examineDate",e)},expression:"listQuery.examineDate"}},[s("template",{slot:"append"},[t._v("分")])],2)],1)],1),t._v(" "),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"考试类别："}},[s("el-radio-group",{model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},[s("el-radio",{attrs:{label:0}},[t._v("模拟考试练习")]),t._v(" "),s("el-radio",{attrs:{label:1}},[t._v("自定义练习")])],1)],1)],1)],1)],1),t._v(" "),t.listQuery.state?s("el-col",{staticStyle:{background:"#EEF5FF",padding:"10px 20px",color:"#4794E9","max-height":"150px","overflow-y":"auto"},attrs:{span:14}},[t._v("\n      "+t._s(t.listQuery.state)+"\n    ")]):t._e(),t._v(" "),s("el-row",{staticStyle:{"margin-top":"150px"}},[s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[s("span",{staticStyle:{float:"left"}},[t._v("题型设置")]),t._v(" "),s("span",[t._v("合计：")]),t._v(" "),s("span",[t._v(t._s(t.totalNum)+"题")]),t._v(" "),0===t.listQuery.status?s("span",[t._v(t._s(t.totalGrade)+"分")]):t._e()]),t._v(" "),1===t.listQuery.status?s("el-checkbox",{staticStyle:{"margin-left":"410px","margin-bottom":"20px"},attrs:{indeterminate:t.isIndeterminate},on:{change:t.changeCheckAll},model:{value:t.checkedFlagAll,callback:function(e){t.checkedFlagAll=e},expression:"checkedFlagAll"}},[t._v("全量题目练习")]):t._e(),t._v(" "),s("el-form",{key:t.newKey,staticClass:"oraganForm",attrs:{"label-width":"",inline:!0}},t._l(t.setTypes,function(e,i){return s("el-row",{key:i,attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"题型：",prop:"type"}},[s("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:function(e){return t.selectType(e,i)},clear:function(e){return t.cancelSelect(i)}},model:{value:t.selectedList["type"+i].type1,callback:function(e){t.$set(t.selectedList["type"+i],"type1",e)},expression:"selectedList[`type${index}`].type1"}},t._l(t.typeList,function(e,i){return s("el-option",{key:i,attrs:{label:e.name,disabled:t.getSelectDisabled(e.type),value:e.type}})}),1),t._v(" "),s("div",{staticClass:"el-form-item__error",staticStyle:{width:"350px"}},[t._v(t._s(t.selectedList["type"+i].tipsType))])],1)],1),t._v(" "),1===t.listQuery.status?s("el-col",{attrs:{span:1}},[s("el-checkbox",{staticStyle:{"margin-top":"10px"},on:{change:function(e){return t.changeCheck(i,e)}},model:{value:t.selectedList["type"+i].checkedFlag,callback:function(e){t.$set(t.selectedList["type"+i],"checkedFlag",e)},expression:"selectedList[`type${index}`].checkedFlag"}},[t._v("全选")])],1):t._e(),t._v(" "),s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:" "}},[s("el-input",{attrs:{max:t.selectedList["type"+i].maxNum,placeholder:"请输入多少道题"},on:{change:function(e){return t.getVal(e,t.selectedList["type"+i].maxNum,i)}},model:{value:t.selectedList["type"+i].testNum,callback:function(e){t.$set(t.selectedList["type"+i],"testNum",e)},expression:"selectedList[`type${index}`].testNum"}},[s("template",{slot:"append"},[t._v("题")])],2),t._v(" "),s("div",{staticClass:"el-form-item__error",staticStyle:{width:"350px"}},[t._v(t._s(t.selectedList["type"+i].tips))])],1)],1),t._v(" "),0===t.listQuery.status?s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:" "}},[s("el-col",{attrs:{span:24}},[s("el-input",{attrs:{placeholder:"请输入多少分"},model:{value:t.selectedList["type"+i].testPrice,callback:function(e){t.$set(t.selectedList["type"+i],"testPrice",e)},expression:"selectedList[`type${index}`].testPrice"}},[s("template",{slot:"append"},[t._v("分")])],2)],1)],1)],1):t._e()],1)}),1)],1)],1)],1),t._v(" "),s("el-row",{staticStyle:{"text-align":"center",margin:"40px 0px 20px"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.repeatTestSave}},[t._v("开始练习")]),t._v(" "),s("el-button",{on:{click:t.goBack}},[t._v("取消")])],1)],1)],1)},l=[],a=(s("ac6a"),s("c5f6"),s("7f7f"),s("35b7")),n=s("6237"),c=s("bafa"),r=s("e64d"),u={name:"PriticeTestSet",components:{TitleCard:a["a"]},filters:{typeFilter:function(t){return"1"===t?"单选题":"2"===t?"多选题":"3"===t?"判断题":"4"===t?"填空题":"5"===t?"简答题":void 0}},props:{testId:{type:String,default:""},testName:{type:String,default:""},testTime:{type:String,default:""}},data:function(){var t=this;return{cardTitle:"自主练习",updateInfo:[],listQuery:{examineName:"",examineDate:"",examineStartDateStr:"",examineEndDateStr:"",examineAllNumber:0,examineSubjectId:"",examineSubjectName:"",IssueStatus:"0",typeAndNum:"",status:0,state:""},typesList:[{type:"1",name:"单选题"},{type:"2",name:"多选题"},{type:"3",name:"判断题"},{type:"4",name:"填空题"}],typeList:[],pickOptionStart:{disabledDate:function(e){var s=t.listQuery.examineEndDateStr;if(s)return e.getTime()>new Date(s).getTime()}},pickOptionEnd:{disabledDate:function(e){var s=t.listQuery.examineStartDateStr;if(s)return e.getTime()<new Date(s).getTime()}},subjectListAll:[],rules:{examineName:[{required:!0,message:"请输入考试名称",trigger:"blur"}],examineDate:[{validator:this.isNum,trigger:"blur"}]},testTypeList:{},errorList:[],errorOptionList:[],emptyList:[],totalGrade:0,totalNum:0,selectedList:{type0:{type1:null,testNum:null,testPrice:null,checkedFlag:!1,tips:null,tipsType:null},type1:{type1:null,testNum:null,testPrice:null,checkedFlag:!1,tips:null,tipsType:null},type2:{type1:null,testNum:null,testPrice:null,checkedFlag:!1,tips:null,tipsType:null},type3:{type1:null,testNum:null,testPrice:null,checkedFlag:!1,tips:null,tipsType:null}},tempData:{},tempData1:[],newKey:1,checkedFlagAll:!1,isIndeterminate:!1,checkedAry:[]}},computed:{setTypes:function(){return this.typeList}},watch:{"listQuery.examineSubjectId":{handler:function(t,e){var s=this;this.subjectListAll.map(function(t){t.id===s.listQuery.examineSubjectId&&(s.listQuery.examineSubjectName=t.subjectName,s.checkedFlagAll&&(s.checkedFlagAll=!1))}),this.getSubjectState(),this.getTopicNumber(),this.findTopicBySubId()},deep:!0},selectedList:{handler:function(t,e){var s=0,i=0;for(var l in this.selectedList){var a=this.selectedList[l];s+=this.StringToNumber(a.testNum)*this.StringToNumber(a.testPrice),i+=this.StringToNumber(a.testNum)}this.totalGrade=s,this.totalNum=i},deep:!0}},created:function(){this.tempData=Object.assign({},this.selectedList),this.getSubjectListAll()},methods:{getSelectDisabled:function(t){var e=!1;for(var s in this.selectedList)this.selectedList[s].type1===t&&(e=!0);return e},isNum:function(t,e,s){var i=/^[1-9]\d*$/;i.test(e)?s():s(new Error("只能输入除0以外的的正整数"))},repeatTestSave:function(){var t=this,e=/^[1-9]\d*$/,s=[];if(e.test(this.listQuery.examineDate)){for(var i in this.errorList=[],this.errorOptionList=[],this.emptyList=[],this.selectedList){var l=this.selectedList[i];l.type1?0===this.listQuery.status?l.testNum&&l.testPrice?(this.errorNum(l.type1,parseInt(l.testNum)),s.push(l.type1+"-"+l.testNum+"-"+l.testPrice)):this.errorOptionList.push("题型、题量以及每道题的分值都需要输入！ "):1===this.listQuery.status&&(l.testNum?(this.errorNum(l.type1,parseInt(l.testNum)),s.push(l.type1+"-"+l.testNum+"-0")):this.errorOptionList.push("题型、题量都需要输入！ ")):l.type1||this.emptyList.push(i)}if(this.emptyList.length===this.typeList.length)this.$notify({title:"提示",message:"您还未进行试题的组合设置！",duration:5500,type:"warning"});else if(this.errorOptionList.length>0)this.$notify({title:"提示",message:this.errorOptionList[0],duration:5500,type:"warning"}),this.errorList=[],this.errorOptionList=[],this.emptyList=[];else if(this.errorList.length>0){for(var a="",c=0;c<this.errorList.length;c++)a+="<p>"+this.errorList[c].name+"，当前数量是"+this.errorList[c].inputnum+"，题库数量为"+this.errorList[c].originNum+"，组题量不能大于题库数量</p>";this.$notify({title:"提示",dangerouslyUseHTMLString:!0,message:a,duration:1500,type:"warning"}),this.errorList=[],this.errorOptionList=[],this.emptyList=[]}else{var r={examineDate:this.listQuery.examineDate,examineSubjectId:this.listQuery.examineSubjectId,examineSubjectName:this.listQuery.examineSubjectName,lianxiType:this.listQuery.status,status:1,typeAndNum:s.join(",")};Object(n["m"])(r).then(function(e){if("0"===e.data.code){var s={id:e.data.examineId};t.$emit("showPage","8",s)}else t.$notify({title:"提示",message:e.data.msg,duration:1500,type:"warning"})})}}else this.$notify({title:"提示",message:"考试时长，只能输入除0以外的的正整数",duration:1500,type:"warning"})},goBack:function(){this.$emit("showPage","1")},selectType:function(t,e){this.selectedList["type".concat(e)].tipsType=null,this.selectedList["type".concat(e)].testNum&&(this.selectedList["type".concat(e)].testNum="",this.selectedList["type".concat(e)].checkedFlag=!1);for(var s=0;s<this.typeList.length;s++)this.typeList[s].type===t&&this.$set(this.typeList[s],"disabled",!0);for(var i in this.selectedList)this.selectedList[i].type1===t&&(this.selectedList[i].maxNum=this.testTypeList[t])},getVal:function(t,e,s){if(Number(t)>e||Number(t)===e){this.selectedList["type".concat(s)].testNum=e;for(var i=0;i<this.typeList.length;i++)this.typeList[i].type===this.selectedList["type".concat(s)].type1&&(this.subjectName=this.typeList[i].name);for(var l in this.selectedList["type".concat(s)].tips="题库中仅有".concat(e,"道").concat(this.subjectName),this.selectedList["type".concat(s)].checkedFlag=!0,this.checkedAry=[],this.selectedList)this.selectedList[l].checkedFlag&&this.checkedAry.push(this.selectedList[l].checkedFlag);4===this.checkedAry.length&&(this.checkedFlagAll=!0)}else this.selectedList["type".concat(s)].tips=null,this.selectedList["type".concat(s)].checkedFlag=!1,this.checkedFlagAll=!1;""===t&&(this.selectedList["type".concat(s)].tips="")},cancelSelect:function(t){this.selectedList["type".concat(t)].checkedFlag=!1,this.checkedFlagAll=!1,this.selectedList["type".concat(t)].tips="";for(var e=0;e<this.typeList.length;e++)this.typeList[e].type===this.typeList[t].type&&this.$set(this.typeList[t],"disabled",!1)},StringToNumber:function(t){return t?parseInt(t):0},getSubjectListAll:function(){var t=this;Object(c["f"])().then(function(e){t.subjectListAll=e.data.findList,t.subjectListAll.length>1&&(t.listQuery.examineSubjectId=t.subjectListAll[0].id,t.listQuery.examineSubjectName=t.subjectListAll[0].subjectName)})},getSubjectState:function(){var t=this,e={id:this.listQuery.examineSubjectId};Object(r["g"])(e).then(function(e){t.listQuery.state=e.data.state})},getTopicNumber:function(){var t=this,e={id:this.listQuery.examineSubjectId};Object(c["g"])(e).then(function(e){t.testTypeList=e.data,t.errorList=[]})},errorNum:function(t,e){"1"===t&&this.testTypeList[1]<e&&this.errorList.push({type:t,name:"单选题",inputnum:e,originNum:this.testTypeList[1]}),"2"===t&&this.testTypeList[2]<e&&this.errorList.push({type:t,name:"多选题",inputnum:e,originNum:this.testTypeList[2]}),"3"===t&&this.testTypeList[3]<e&&this.errorList.push({type:t,name:"判断题",inputnum:e,originNum:this.testTypeList[3]}),"4"===t&&this.testTypeList[4]<e&&this.errorList.push({type:t,name:"填空题",inputnum:e,originNum:this.testTypeList[4]})},findTopicBySubId:function(){var t=this;Object(c["c"])({subjectId:this.listQuery.examineSubjectId}).then(function(e){var s=e.data.findList.type;for(var i in t.typeList=[],t.tempData1=[],s.forEach(function(e,s){for(var i in t.typesList.map(function(s){e===s.type&&t.typeList.push(s)}),t.tempData)"type".concat(s)===i&&t.tempData1.push(s)}),t.selectedList={type0:{type1:null,testNum:null,testPrice:null,checkedFlag:!1,tips:null,tipsType:null},type1:{type1:null,testNum:null,testPrice:null,checkedFlag:!1,tips:null,tipsType:null},type2:{type1:null,testNum:null,testPrice:null,checkedFlag:!1,tips:null,tipsType:null},type3:{type1:null,testNum:null,testPrice:null,checkedFlag:!1,tips:null,tipsType:null}},t.selectedList)i>="type"+t.tempData1.length&&t.$delete(t.selectedList,i)})},changeCheckAll:function(t){if(!0===t)for(var e=0;e<this.typeList.length;e++)this.selectedList["type".concat(e)].type1=this.typeList[e].type,this.selectedList["type".concat(e)].maxNum=this.testTypeList[this.typeList[e].type],this.selectedList["type".concat(e)].testNum=this.testTypeList[this.typeList[e].type],this.selectedList["type".concat(e)].checkedFlag=!0;else for(var s=0;s<this.typeList.length;s++)this.selectedList["type".concat(s)].type1=null,this.selectedList["type".concat(s)].testNum=null,this.selectedList["type".concat(s)].checkedFlag=!1},changeCheck:function(t,e){if(this.newKey++,this.selectedList["type".concat(t)].type1)if(this.selectedList["type".concat(t)].tipsType=null,!1===e)this.selectedList["type".concat(t)].checkedFlag=!1,this.checkedFlagAll=!1;else{for(var s in this.selectedList["type".concat(t)].checkedFlag=!0,this.selectedList["type".concat(t)].testNum=this.selectedList["type".concat(t)].maxNum,this.checkedAry=[],this.selectedList)this.selectedList[s].checkedFlag&&this.checkedAry.push(this.selectedList[s].checkedFlag);4===this.checkedAry.length&&(this.checkedFlagAll=!0)}else this.selectedList["type".concat(t)].checkedFlag=!1,this.selectedList["type".concat(t)].tipsType="请先选择题型"}}},p=u,o=(s("a537"),s("2877")),d=Object(o["a"])(p,i,l,!1,null,"618a5784",null);e["default"]=d.exports},a537:function(t,e,s){"use strict";var i=s("e140"),l=s.n(i);l.a},e140:function(t,e,s){},e64d:function(t,e,s){"use strict";s.d(e,"a",function(){return l}),s.d(e,"i",function(){return a}),s.d(e,"h",function(){return n}),s.d(e,"c",function(){return c}),s.d(e,"f",function(){return r}),s.d(e,"b",function(){return u}),s.d(e,"d",function(){return p}),s.d(e,"e",function(){return o}),s.d(e,"g",function(){return d}),s.d(e,"j",function(){return h}),s.d(e,"k",function(){return m}),s.d(e,"l",function(){return y});var i=s("b775");function l(t){return Object(i["a"])({url:"/app/xlgl/xlglexamsubject/save",method:"post",data:t})}function a(){return Object(i["a"])({url:"/app/xlgl/xlglexamsubject/subject",method:"get"})}function n(t){return Object(i["a"])({url:"/app/xlgl/xlglexamtopic/list",method:"get",params:t})}function c(t){return Object(i["a"])({url:"/app/xlgl/xlglexamsubject/update",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/app/xlgl/xlglexamsubject/delete",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/app/xlgl/xlglexamtopic/delete",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/app/xlgl/xlglexamtopic/info",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/app/xlgl/xlglexamfile/list",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/app/xlgl/xlglexamsubject/getSubjectState",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/app/xlgl/xlglexamsubject/getUpLoad",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/app/xlgl/xlglexamtopic/saveTopic",method:"post",data:t})}function y(t){return Object(i["a"])({url:"/app/xlgl/xlglexamtopic/updateTopic",method:"post",data:t})}}}]);