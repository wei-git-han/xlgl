(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-631dc353"],{"06c9":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-card",[r("div",{staticStyle:{height:"40px","text-align":"right"}},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.updateData}},[e._v("确定")])],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:5}},[r("el-input",{attrs:{placeholder:"输入人员名称进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),r("el-scrollbar",{staticClass:"hidden-x",staticStyle:{height:"750px"}},[r("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"userTree",staticClass:"filter-tree",attrs:{data:e.userTreeData,props:e.defaultProps,"node-key":"id","filter-node-method":e.filterNode,"default-expanded-keys":e.defaultActiveId},on:{"node-click":e.selectUser}})],1)],1),e._v(" "),r("el-col",{attrs:{span:19}},[r("el-scrollbar",{staticClass:"hidden-x",staticStyle:{height:"calc(100vh - 150px)"}},[r("el-tree",{ref:"menuTree",attrs:{data:e.menuTreeData,"show-checkbox":"",props:e.defaultProps,"node-key":"id","default-expand-all":!0,"default-expanded-keys":["all"]},on:{check:e.getCheckMenu}})],1)],1)],1)],1)],1)},a=[],i=(r("8e6e"),r("456d"),r("ac6a"),r("bd86")),s=r("d8e5"),u=r("8f39"),c=r("a417"),o=r("ed08"),l=r("2f62");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(r,!0).forEach(function(t){Object(i["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var p=f({name:"BusinessConfig"},Object(l["b"])(["permission_routes"]),{data:function(){return{tableKey:0,list:null,total:0,listLoading:!0,treeLoading:!1,collectList:[],temp:{id:"",userName:"",uid:"",param:""},defaultProps:{children:"children",label:"text"},dialogFormVisible:!1,showUserTree:!1,showMenuTree:!1,userTreeData:[],menuTreeData:[],defaultActiveId:[],filterText:"",userSelectType:"",hasChildrenData:[]}},watch:{showMenuTree:function(e){e||this.getCheckMenu()},filterText:function(e){this.$refs.userTree.filter(e)}},created:function(){this.getTree()},methods:{selectUser:function(e){this.userSelectType=e.type,"1"===e.type?(this.temp.uid=e.id,this.temp.userName=e.text,this.showUserTree=!1,this.getPeoplePermissionList(e.id)):this.$refs.menuTree.setCheckedKeys([])},handleSelectionChange:function(e){this.collectList=e},getTree:function(){var e=this;this.treeLoading=!0,Object(c["a"])().then(function(t){e.userTreeData=[t.data],e.defaultActiveId=[t.data.children[0].id],setTimeout(function(){e.treeLoading=!1},1)}),Object(u["b"])().then(function(t){e.menuTreeData=[{id:"all",text:"全部",children:t.data}],e.hasChildrenData=Object(o["c"])(t.data,!0),e.$nextTick(function(){e.getPeoplePermissionList(e.$store.state.user.userInfo.userId)})}),Object(u["d"])().then(function(e){console.log(e.data)})},resetTemp:function(){this.temp={}},updateData:function(){var e=this;if("1"===this.userSelectType){var t=Object.assign({},this.temp);Object(u["c"])(t).then(function(t){var r="修改失败",n="info";t.data.result&&(n="success",r="修改成功",e.dialogFormVisible=!1,e.getAdminsetJuList()),e.$notify({title:"提示",message:r,duration:1500,type:n})})}else this.$notify({title:"提示",message:"只有人员才可以被授予菜单权限",duration:1500,type:"warning"})},getCheckMenu:function(){var e=this.$refs.menuTree.getCheckedNodes(!1,!0),t=[],r=[];e.forEach(function(e){"all"!==e.id&&(r.push(e.id),t.push(e.text))}),this.temp.param=r.toString(),this.temp.paramName=t.toString()},filterNode:function(e,t){return!e||-1!==t.text.indexOf(e)},getPeoplePermissionList:function(e){var t=this;this.$refs.menuTree.setCheckedKeys([]);var r={userId:e};Object(s["g"])(r).then(function(e){if("no"===e.data.result)t.$notify({title:"提示",message:"该用户尚未配置菜单！",duration:1500,type:"warning"});else{var r=[];e.data.result.forEach(function(e){-1===t.hasChildrenData.indexOf(e)&&r.push(e)}),t.$refs.menuTree.setCheckedKeys(r)}})}}}),h=p,m=(r("9392"),r("2877")),g=Object(m["a"])(h,n,a,!1,null,"1dfc787c",null);t["default"]=g.exports},9392:function(e,t,r){"use strict";var n=r("fd17"),a=r.n(n);a.a},a417:function(e,t,r){"use strict";r.d(t,"c",function(){return a}),r.d(t,"b",function(){return i}),r.d(t,"a",function(){return s});var n=r("b775");function a(){return Object(n["a"])({url:"/app/base/user/tree",method:"get"})}function i(){return Object(n["a"])({url:"/app/base/user/chuTree",method:"get"})}function s(){return Object(n["a"])({url:"/app/base/user/allTree",method:"get"})}},d8e5:function(e,t,r){"use strict";r.d(t,"d",function(){return a}),r.d(t,"c",function(){return i}),r.d(t,"a",function(){return s}),r.d(t,"e",function(){return u}),r.d(t,"b",function(){return c}),r.d(t,"f",function(){return o}),r.d(t,"g",function(){return l});var n=r("b775");function a(e){return Object(n["a"])({url:"/app/xlgl/adminset/list",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/app/xlgl/adminset/juList",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/app/xlgl/adminset/chuList",method:"get",params:e})}function u(e){return Object(n["a"])({url:"/app/xlgl/adminset/saveOrUpdate",method:"get",params:e})}function c(e){return Object(n["a"])({url:"/app/xlgl/adminset/delete",method:"get",params:e})}function o(){return Object(n["a"])({url:"/app/base/user/allTree",method:"get"})}function l(e){return Object(n["a"])({url:"/app/xlgl/taskmenu/getPeoplePermissionList",method:"post",data:e})}},fd17:function(e,t,r){}}]);