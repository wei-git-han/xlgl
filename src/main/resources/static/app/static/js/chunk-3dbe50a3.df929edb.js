(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dbe50a3"],{"170d":function(t,e,i){},7769:function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"app-content"},[i("title-card",{attrs:{"title-text":t.title}}),t._v(" "),"0"===t.show||"1"===t.show||"3"===t.show?i("el-button",{staticStyle:{float:"right",margin:"-40px 120px 0 30px"},attrs:{type:"success",size:"mini"},on:{click:t.openDialog}},[t._v("导入")]):t._e(),t._v(" "),i("el-row",{staticStyle:{padding:"20px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:15}},[i("div",{staticClass:"div1"},[i("iframe",{attrs:{src:t.onlineFileUrl,frameborder:"0",width:"100%",height:"100%"}})])]),t._v(" "),i("el-col",{attrs:{span:9}},[i("div",{staticClass:"div1"},[i("div",[i("el-table",{key:t.tableKey,ref:"filetable",attrs:{data:t.fileList,height:"calc(100vh - 150px)",border:"",fit:"","highlight-current-row":""},on:{"row-click":t.handleCurrent}},[i("el-table-column",{attrs:{label:"文件名称",align:"center","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[i("span",[t._v(t._s(l.fileName))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"上传时间",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[i("span",[t._v(t._s(l.createdTime))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"上传人",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[i("span",[t._v(t._s(l.creator))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return e.stopPropagation(),t.handleModifyStatus(l,"down")}}},[t._v("下载")])]}}])})],1)],1)])])],1),t._v(" "),i("el-dialog",{attrs:{title:"上传附件",visible:t.fileDialog,width:"40%","before-close":t.closeFileDialog},on:{"update:visible":function(e){t.fileDialog=e}}},[i("div",{staticClass:"centerPosition"},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"","auto-upload":!1,"with-credentials":!0,action:t.fileUploadUrl,data:t.fileData,"on-success":t.successFile,"on-error":t.errorFile}},[i("i",{staticClass:"el-icon-upload"}),t._v(" "),i("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),i("em",[t._v("点击上传")])]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("支持上传word、excel、ofd等格式")])])],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitFile}},[t._v("确 定")]),t._v(" "),i("el-button",{on:{click:t.closeFileDialog}},[t._v("取 消")])],1)])],1)])},s=[],a=i("b775");function o(t){return Object(a["a"])({url:"/app/xlgl/xlglzbgl/getFileList",method:"post",data:t})}var n=i("35b7"),r={name:"EquipIndex",components:{TitleCard:n["a"]},data:function(){return{title:"单位通用装备实力统计表",show:this.$store.state.user.userInfo.adminFlag,listQuery:{page:1,limit:20},total:0,listLoading:!1,tableKey:0,fileList:[],fileDialog:!1,fileData:{access_token:this.$store.state.user.token},fileUploadUrl:"/app/xlgl/xlglzbgl/uploadFile",onlineFileUrl:""}},created:function(){this.getZbFileList()},mounted:function(){},methods:{handleCurrent:function(t){this.$refs.filetable.setCurrentRow(t),this.onlineFileUrl="/app/openFile/demo.html?fileId="+t.infoId+"&access_token="+this.$store.state.user.token},getZbFileList:function(){var t=this;this.listLoading=!0,o(this.listQuery).then(function(e){t.fileList=e.data.list,t.fileList.length>0&&(t.$refs.filetable.setCurrentRow(t.fileList[0]),t.onlineFileUrl="/app/openFile/demo.html?fileId="+t.fileList[0].fileId+"&access_token="+t.$store.state.user.token),setTimeout(function(){t.listLoading=!1},1)})},openDialog:function(){this.onlineFileUrl="",this.fileDialog=!0},closeFileDialog:function(){this.$refs.upload.clearFiles(),this.fileDialog=!1},submitFile:function(){this.$root.$emit("uploadFileHandle",!0),this.$refs.upload.submit()},successFile:function(t){this.$root.$emit("uploadFileHandle",!1),t.fileId&&t.fileId.length>0?(this.$notify({title:"提示",message:"上传成功！",type:"success",duration:1500}),this.getZbFileList(),this.closeFileDialog()):this.$notify({title:"提示",message:t.msg,duration:1500,type:"warning"})},errorFile:function(){this.$root.$emit("uploadFileHandle",!1),this.$notify({title:"提示",message:"上传失败!",duration:1500,type:"warning"})},handleModifyStatus:function(t,e){"down"===e&&(window.location.href="/app/xlgl/xlglcarsmanager/downLoadFile?fileId="+t.fileId+"&access_token="+this.$store.state.user.token)}}},c=r,d=(i("cc63"),i("2877")),u=Object(d["a"])(c,l,s,!1,null,"c47193c8",null);e["default"]=u.exports},cc63:function(t,e,i){"use strict";var l=i("170d"),s=i.n(l);s.a}}]);