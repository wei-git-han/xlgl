(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-265ff0e9","chunk-6d496a02"],{"14b9":function(e,t,s){var a=s("5ca1");a(a.P,"String",{repeat:s("9744")})},"2f21":function(e,t,s){"use strict";var a=s("79e5");e.exports=function(e,t){return!!e&&a(function(){t?e.call(null,function(){},1):e.call(null)})}},"386b":function(e,t,s){var a=s("5ca1"),i=s("79e5"),n=s("be13"),o=/"/g,r=function(e,t,s,a){var i=String(n(e)),r="<"+t;return""!==s&&(r+=" "+s+'="'+String(a).replace(o,"&quot;")+'"'),r+">"+i+"</"+t+">"};e.exports=function(e,t){var s={};s[e]=t(r),a(a.P+a.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",s)}},"55dd":function(e,t,s){"use strict";var a=s("5ca1"),i=s("d8e8"),n=s("4bf8"),o=s("79e5"),r=[].sort,l=[1,2,3];a(a.P+a.F*(o(function(){l.sort(void 0)})||!o(function(){l.sort(null)})||!s("2f21")(r)),"Array",{sort:function(e){return void 0===e?r.call(n(this)):r.call(n(this),i(e))}})},"7f57":function(e,t,s){"use strict";var a=s("bb18"),i=s.n(a);i.a},9744:function(e,t,s){"use strict";var a=s("4588"),i=s("be13");e.exports=function(e){var t=String(i(this)),s="",n=a(e);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(s+=t);return s}},"9ec8":function(e,t,s){"use strict";s("386b")("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},af91:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"addPage"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{staticStyle:{"padding-bottom":"100px",position:"relative"}},[s("title-card",{attrs:{"title-text":"训管动态新增"}}),e._v(" "),s("svg-icon",{staticClass:"icon",staticStyle:{cursor:"pointer",position:"absolute",right:"20px",top:"15px"},attrs:{"icon-class":"goback"},on:{click:e.backFn}}),e._v(" "),s("div",{staticStyle:{padding:"20px 0"}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[s("el-col",{attrs:{span:10}},[s("el-form-item",{attrs:{label:"动态类型",prop:"newsType",required:""}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.newsType,callback:function(t){e.$set(e.form,"newsType",t)},expression:"form.newsType"}},[s("el-option",{attrs:{label:"上级工作动态",value:"上级工作动态"}}),e._v(" "),s("el-option",{attrs:{label:"机关部队训练风采",value:"机关部队训练风采"}}),e._v(" "),s("el-option",{attrs:{label:"安全管理",value:"安全管理"}})],1)],1)],1),e._v(" "),s("el-col",{attrs:{span:10}},[s("el-form-item",{attrs:{label:"发布单位",required:""}},[s("el-input",{attrs:{disabled:""},model:{value:e.deptName,callback:function(t){e.deptName=t},expression:"deptName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:10}},[s("el-form-item",{attrs:{label:"动态标题",required:""}},[s("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"编辑内容"}},[s("ueditor",{ref:"content",model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"上传封面"}},[s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{accept:".png,.jpeg",drag:"",action:e.fileUrl,data:e.access_token,name:"pdf","file-list":e.imgList,"list-type":"picture","on-success":e.uploadImg,"on-error":e.errorFile,"on-remove":e.removeImg,"on-change":e.handleChangeFile,multiple:""}},[s("i",{staticClass:"el-icon-upload"}),e._v(" "),s("div",{staticClass:"el-upload__text"},[e._v("\n                  将文件拖到此处，或"),s("em",[e._v("点击上传")]),e._v(" "),s("div",{staticStyle:{color:"#BBBBBB","font-size":"12px"}},[e._v("注：只能上传.mp4/.png/.jpeg等文件格式")])])])],1)],1)],1)],1),e._v(" "),s("el-col",{staticStyle:{"text-align":"center","margin-top":"30px"},attrs:{span:24}},[s("el-button",{attrs:{type:"success"},on:{click:e.saveFn}},[e._v("发布")]),e._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.flag,expression:"flag!='0'"}],staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.saveDraft}},[e._v("存草稿")])],1)],1)],1)],1)},i=[],n=(s("28a5"),s("aa2a")),o=s("35b7"),r=s("63f4"),l={components:{Ueditor:r["a"],TitleCard:o["a"]},props:{id:{type:String,default:""},flag:{type:String,default:""}},data:function(){return{form:{title:"",newsType:"",content:"",pIds:"",picutureName:""},deptName:"",isRelease:"",imgList:[],fileUrl:"/app/xlgl/news/upLoadFile",access_token:this.$store.state.user.token}},created:function(){this.getDeptName(),this.id&&this.eidtOrUpdate()},methods:{getDeptName:function(){var e=this;Object(n["d"])().then(function(t){e.deptName=t.data.deptName})},eidtOrUpdate:function(){var e=this;Object(n["f"])({id:this.id}).then(function(t){var s=t.data.xlglNews,a=s.title,i=s.newsType,n=s.content;Object.assign(e.form,{title:a,newsType:i,content:n}),e.isRelease=t.data.xlglNews.isRelease,t.data.xlglNews.picturePath&&e.imgList.push({name:t.data.xlglNews.pictureName,url:"/app/xlgl/xlgldocumentfile/downLoad?fileId=".concat(t.data.xlglNews.picturePath)}),e.$refs.content.setContent(e.form.content)})},backFn:function(){this.$emit("back",0)},uploadImg:function(e){e.fileId&&e.fileId.length>0?(this.form.pIds=e.fileId,this.form.picutureName=e.picutureName):this.errorFile()},errorFile:function(){this.$message({type:"info",message:"上传失败!"})},removeImg:function(e){var t=this;Object(n["c"])({infoId:this.id,pictureId:e.url.split("=")[1]}).then(function(e){"success"===e.data.result?(t.$message({message:"图片删除成功",type:"success"}),t.form.picutureName="",t.form.pIds=""):t.$message({type:"info",message:"图片删除失败!"})})},handleChangeFile:function(e,t){t.length>1&&t.splice(0,1)},saveData:function(e){var t=this;this.form.newsType?this.form.title?(this.form.isRelease=e,this.form.content=this.$refs.content.getContent(),this.id&&(this.form.id=this.id),Object(n["i"])(this.form).then(function(s){"success"===s.data.result?t.id?("1"===e&&"1"===t.isRelease&&t.$message({type:"success",message:"修改成功"}),"0"===e&&t.$message({type:"success",message:"存入草稿箱成功"}),"1"===e&&"0"===t.isRelease&&t.$message({type:"success",message:"发布成功"})):("1"===e&&t.$message({type:"success",message:"发布成功"}),"0"===e&&t.$message({type:"success",message:"存入草稿箱成功"})):t.id?("1"===e&&"1"===t.isRelease&&t.$message({type:"success",message:"修改失败"}),"0"===e&&t.$message({type:"success",message:"存入草稿箱失败"}),"1"===e&&"0"===t.isRelease&&t.$message({type:"success",message:"发布失败"})):("1"===e&&t.$message({type:"success",message:"发布失败"}),"0"===e&&t.$message({type:"success",message:"存入草稿箱失败"})),t.form="",t.$emit("back",0)})):this.$message({message:"请输入动态标题",type:"info"}):this.$message({message:"请选择动态类型",type:"info"})},saveFn:function(){this.saveData("1")},saveDraft:function(){this.saveData("0")}}},c=l,u=(s("7f57"),s("2877")),p=Object(u["a"])(c,a,i,!1,null,"e09872ce",null);t["default"]=p.exports},bb18:function(e,t,s){}}]);