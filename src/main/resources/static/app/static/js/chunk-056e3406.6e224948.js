(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-056e3406"],{8438:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{staticStyle:{"background-color":"#ffffff","padding-bottom":"10px"},attrs:{span:18}},[a("title-card",{attrs:{"title-text":t.filterTestName+"("+t.testTime+")",title:t.cardTitle}}),t._v(" "),a("el-button",{staticStyle:{float:"right",cursor:"pointer","margin-top":"-40px","margin-right":"200px"},attrs:{type:"primary",size:"mini"},on:{click:t.exportFn}},[t._v("导出")]),t._v(" "),a("el-button",{staticStyle:{float:"right",cursor:"pointer","margin-top":"-40px","margin-right":"110px"},attrs:{type:"primary",size:"mini"},on:{click:t.openOriginTest}},[t._v("查看原题")]),t._v(" "),a("el-button",{staticStyle:{float:"right",cursor:"pointer","margin-top":"-40px","margin-right":"10px"},attrs:{type:"primary",size:"mini"},on:{click:t.goBack}},[t._v("返回上一级")]),t._v(" "),a("div",{staticClass:"rateDiv"},[a("div",[t._v("考试总体情况统计")]),t._v(" "),a("ul",{staticClass:"ulSty"},[a("li",[t._v("\n            参考率：\n            "),a("span",{staticClass:"color1 size1"},[t._v(t._s(t.info.raioAll)+"%")])]),t._v(" "),a("li",[t._v("\n            参考人数：\n            "),a("span",{staticClass:"color2 size1"},[t._v(t._s(t.info.peopleNum)+"人")])]),t._v(" "),a("li",[t._v("\n            待考人数：\n            "),a("span",{staticClass:"color3 size1"},[t._v(t._s(t.info.fillUpNum)+"人")])]),t._v(" "),a("li",[t._v("\n            优秀率：\n            "),a("span",{staticClass:"color1 size1"},[t._v(t._s(t.info.excellent)+"%")])]),t._v(" "),a("li",[t._v("\n            优良率：\n            "),a("span",{staticClass:"color2 size1"},[t._v(t._s(t.info.fine)+"%")])]),t._v(" "),a("li",[t._v("\n            及格率：\n            "),a("span",{staticClass:"color3 size1"},[t._v(t._s(t.info.pass)+"%")])])])]),t._v(" "),a("div",[1===t.showAll?a("div",[t._v("各单位参考情况统计")]):t._e(),t._v(" "),1!=t.showAll?a("div",{staticStyle:{display:"flex","flex-direction":"row","margin-bottom":"20px"}},[a("div",[a("el-dropdown",{on:{command:t.handleCommand}},[a("el-button",{attrs:{type:"primary"}},[t._v("\n                "+t._s(t.commandType)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"按部门"}},[t._v("按部门")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"按人员"}},[t._v("按人员")])],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.showAll,expression:"showAll === 3"}],staticStyle:{"margin-left":"20px"}},[a("el-popover",{attrs:{placement:"bottom-start",width:"200",trigger:"click"},model:{value:t.showTree,callback:function(e){t.showTree=e},expression:"showTree"}},[a("el-scrollbar",{staticClass:"hidden-x",staticStyle:{height:"400px"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoading,expression:"treeLoading"}],attrs:{data:t.treeData,props:t.defaultProps,"node-key":"id","default-expanded-keys":["root"]},on:{"node-click":t.selectUser}})],1),t._v(" "),a("el-input",{staticStyle:{width:"130px"},attrs:{slot:"reference",placeholder:"请选择部门",readonly:"readonly"},slot:"reference",model:{value:t.listQuery.organName,callback:function(e){t.$set(t.listQuery,"organName",e)},expression:"listQuery.organName"}},[a("i",{staticClass:"el-input__icon",class:[{"el-icon-arrow-up":t.showTree,"el-icon-arrow-down ":!t.showTree}],attrs:{slot:"suffix"},on:{click:function(e){t.showTree}},slot:"suffix"})])],1),t._v(" "),"first"===t.activeName?a("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{placeholder:"考试方式",clearable:""},on:{change:t.getRepeatTestList},model:{value:t.listQuery.makeupStatus,callback:function(e){t.$set(t.listQuery,"makeupStatus",e)},expression:"listQuery.makeupStatus"}},[a("el-option",{attrs:{label:"正常",value:0}}),t._v(" "),a("el-option",{attrs:{label:"补考",value:1}})],1):t._e(),t._v(" "),"first"===t.activeName?a("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{placeholder:"等级",clearable:""},on:{change:t.getRepeatTestList},model:{value:t.listQuery.level,callback:function(e){t.$set(t.listQuery,"level",e)},expression:"listQuery.level"}},[a("el-option",{attrs:{label:"优秀",value:"优秀"}}),t._v(" "),a("el-option",{attrs:{label:"优良",value:"优良"}}),t._v(" "),a("el-option",{attrs:{label:"及格",value:"及格"}}),t._v(" "),a("el-option",{attrs:{label:"不及格",value:"不及格"}})],1):t._e(),t._v(" "),a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入人员姓名"},model:{value:t.listQuery.replyUserName,callback:function(e){t.$set(t.listQuery,"replyUserName",e)},expression:"listQuery.replyUserName"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getRepeatTestList}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:t.resetForm}},[t._v("重置")])],1)]):t._e(),t._v(" "),3!=t.showAll?a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"ma-t_20",attrs:{data:t.tableData,height:"calc(100vh - 260px)",border:"",fit:"","header-cell-style":{fontSize:"16px",color:"#000"}},on:{"sort-change":t.changeTableSort}},[a("el-table-column",{attrs:{label:1===t.showAll?"单位名称":"部门名称",align:"center",prop:"organName","min-width":"150px"}}),t._v(" "),a("el-table-column",{attrs:{label:"参考率",align:"center",prop:"raioAll",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.raioAll)+"%")])]}}],null,!1,3700252510)}),t._v(" "),a("el-table-column",{attrs:{label:"已考人数",width:"170px",prop:"peopleNum",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"待考人数",width:"170px",prop:"fillUpNum",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"优秀率",align:"center",prop:"excellentlv",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.excellentlv)+"%")])]}}],null,!1,2416280916)}),t._v(" "),a("el-table-column",{attrs:{label:"优良率",align:"center",prop:"finelv",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.finelv)+"%")])]}}],null,!1,3927539924)}),t._v(" "),a("el-table-column",{attrs:{label:"及格率",align:"center",prop:"passlv",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.passlv)+"%")])]}}],null,!1,2561183777)}),t._v(" "),1===t.showAll?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!0===i.status,expression:"row.status === true"}],attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.showQuanjuList(i)}}},[t._v("查看")])]}}],null,!1,4101630352)}):t._e()],1)],1):t._e(),t._v(" "),3===t.showAll?a("div",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"已考人员清单",name:"first"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,attrs:{data:t.list,height:"calc(100vh - 420px)",border:"",fit:"","header-cell-style":{fontSize:"16px",color:"#000"}}},[a("el-table-column",{attrs:{label:"姓名",align:"center","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.replyUserName))])]}}],null,!1,1011083616)}),t._v(" "),a("el-table-column",{attrs:{label:"部门",width:"250px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.organName))])]}}],null,!1,1882615702)}),t._v(" "),a("el-table-column",{attrs:{label:"成绩",width:"170px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.fractionsum))])]}}],null,!1,528903205)}),t._v(" "),a("el-table-column",{attrs:{label:"考试方式",width:"170px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(t._f("bkFilter")(i.makeupStatus)))])]}}],null,!1,1189406023)}),t._v(" "),a("el-table-column",{attrs:{label:"等级",width:"250px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.level))])]}}],null,!1,854027058)})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"未考人员清单",name:"second"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,attrs:{data:t.list,height:"calc(100vh - 420px)",border:"",fit:"","header-cell-style":{fontSize:"16px",color:"#000"}}},[a("el-table-column",{attrs:{label:"姓名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.replyUserName))])]}}],null,!1,1011083616)}),t._v(" "),a("el-table-column",{attrs:{label:"部门",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.organName))])]}}],null,!1,1882615702)})],1)],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getRepeatTestList}})],1)],1):t._e()])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-row",{staticStyle:{height:"calc(100vh - 100px)",overflow:"hidden"}},[a("el-scrollbar",{staticClass:"hidden-x",staticStyle:{overflow:"hidden",height:"100%"}},[a("el-col",{staticClass:"div2",attrs:{span:24}},[a("div",[a("div",{staticClass:"div3"},[a("svg-icon",{staticClass:"icon imgP",attrs:{"icon-class":"xinwen"}}),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"div4"},[t._v("\n                    原考题配比"),a("br")]),t._v(" "),a("div",{staticClass:"div4"},[t._v("\n                    "+t._s(t._f("textFileter")(t.originalTopic.length))+"题型比例\n                  ")])]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v("\n                  "+t._s(t.originalTopic.totalNum)+"题"+t._s(t.originalTopic.totalGrade)+"分\n                ")])],1),t._v(" "),a("div",t._l(t.topNumData,function(e,i){return a("el-col",{key:i,staticClass:"div5",attrs:{span:12}},[a("el-col",{staticStyle:{"line-height":"80px"},attrs:{span:12}},[t._v("\n                    "+t._s(t._f("typeFilter")(e.topicType))+"\n                  ")]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"div4"},[t._v("\n                      "+t._s(e.numberAll)+"分\n                    ")]),t._v(" "),a("div",{staticClass:"div4"},[t._v("\n                      "+t._s(e.typeCount)+"题\n                    ")])])],1)}),1)])]),t._v(" "),a("el-col",{staticClass:"div2",staticStyle:{"margin-top":"20px"},attrs:{span:24}},[a("div",[a("div",{staticClass:"div3"},[a("svg-icon",{staticClass:"icon imgP",attrs:{"icon-class":"benyue"}}),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"div4"},[t._v("\n                    补考题配比"),a("br")]),t._v(" "),a("div",{staticClass:"div4"},[t._v("\n                    "+t._s(t._f("textFileter")(t.topicTypeCount.length))+"题型比例\n                  ")])]),t._v(" "),t.topicTypeCount.length>0?a("el-col",{attrs:{span:8}},[t._v("\n                  "+t._s(t.topicTypeCount.totalNum)+"题"+t._s(t.topicTypeCount.totalGrade)+"分\n                ")]):t._e()],1),t._v(" "),t.topicTypeCount.length>0?a("div",t._l(t.topicTypeCount,function(e,i){return a("el-col",{key:i,staticClass:"div5",attrs:{span:12}},[a("el-col",{staticStyle:{"line-height":"80px"},attrs:{span:12}},[t._v("\n                    "+t._s(t._f("typeFilter")(e.topicType))+"\n                  ")]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"div4"},[t._v("\n                      "+t._s(e.numberAll)+"分\n                    ")]),t._v(" "),a("div",{staticClass:"div4"},[t._v("\n                      "+t._s(e.typeCount)+"题\n                    ")])])],1)}),1):t._e(),t._v(" "),"0"!==t.show&&"1"!==t.show&&"3"!==t.show||"0"!==t.info.examine.makeupStatus||"1"!==t.overStatus?t._e():a("el-col",{attrs:{span:24}},[a("el-button",{staticStyle:{width:"100%",height:"40px","font-size":"1rem"},attrs:{type:"success",size:"mini"},on:{click:t.repeatSet}},[t._v("发起补考")])],1)],1)])],1)],1)],1)],1)],1)},s=[],l=(a("ac6a"),a("7f7f"),a("35b7")),n=a("333d"),o=a("6237"),r={name:"RepeatTest",components:{TitleCard:l["a"],Pagination:n["a"]},filters:{bkFilter:function(t){return"0"===t?"正常":"1"===t?"补考":void 0},typeFilter:function(t){return"1"===t?"单选题":"2"===t?"多选题":"3"===t?"判断题":"4"===t?"填空题":"5"===t?"简答题":void 0},textFileter:function(t){return 0===t?"零":1===t?"一":2===t?"二":3===t?"三":4===t?"四":5===t?"五":void 0}},props:{testId:{type:String,default:""},testName:{type:String,default:""},testTime:{type:String,default:""},finishStatus:{type:String,default:""},overStatus:{type:String,default:""}},data:function(){return{cardTitle:this.testName+"("+this.testTime+")",listQuery:{page:1,limit:20,isNotExam:0,makeupStatus:"",level:"",organId:"",organName:"",replyUserName:"",deptId:""},listLoading:!1,tableLoading:!1,tableKey:0,list:null,total:0,activeName:"first",info:{excellent:0,fillUpNum:0,fine:0,pass:0,peopleNum:0,raioAll:0,examine:{}},topicTypeCount:[],originalTopic:[],show:this.$store.state.user.userInfo.adminFlag,topicType_list:[],topNumData:[],defaultProps:{children:"children",label:"text"},showTree:!1,treeData:[],treeLoading:!1,tableData:[],showTree1:!1,rateQuery:{examineId:this.testId,organId:"",organName:"",orderBy:""},showAll:1,commandType:"按部门",rateList:{examineId:this.testId,organId:""},treeList:{organId:""}}},computed:{filterTestName:function(){return this.testName.length<20?this.testName:this.testName.substring(0,20)+"..."}},watch:{showAll:function(t){2===t&&(this.rateQuery.orderBy="")}},created:function(){this.listQuery.isNotExam=1,this.getExamineTotal(),this.getTopicTypeCount(),this.examAnalyse()},methods:{handleClick:function(t,e){"first"===t.name?this.listQuery.isNotExam=1:(this.listQuery.isNotExam=0,this.listQuery.makeupStatus=""),this.getRepeatTestList()},getRepeatTestList:function(){var t=this;this.list=null,this.listQuery.examineId=this.testId,this.listQuery.status=0,Object(o["f"])(this.listQuery).then(function(e){t.list=e.data.page.list,t.total=e.data.page.totalCount,setTimeout(function(){t.listLoading=!1},1)})},resetForm:function(){this.listQuery.makeupStatus="",this.listQuery.organId="",this.listQuery.organName="",this.listQuery.replyUserName="",this.listQuery.level="",this.getRepeatTestList()},getExamineTotal:function(){var t=this;Object(o["e"])(this.rateList).then(function(e){t.info=e.data})},getTopicTypeCount:function(){var t=this,e={examineId:this.testId};Object(o["h"])(e).then(function(e){t.topicTypeCount="0"===e.data.makeUpTopic?[]:e.data.makeUpTopic,t.topNumData="0"===e.data.originalTopic?[]:e.data.originalTopic,t.originalTopic={},e.data.originalTopic.length>0?(t.originalTopic.totalGrade=0,t.originalTopic.totalNum=0,e.data.originalTopic.forEach(function(e){t.originalTopic.totalGrade+=parseInt(e.numberAll),t.originalTopic.totalNum+=parseInt(e.typeCount),t.topicType_list.push(e.topicType)})):(t.originalTopic.totalGrade=parseInt(0),t.originalTopic.totalNum=parseInt(0)),e.data.makeUpTopic.length>0&&(t.topicTypeCount.totalGrade=0,t.topicTypeCount.totalNum=0,e.data.makeUpTopic.forEach(function(e){t.topicTypeCount.totalGrade+=parseInt(e.numberAll),t.topicTypeCount.totalNum+=parseInt(e.typeCount)}))})},goBack:function(){1!==this.showAll?(this.showAll=1,this.rateQuery.organId="",this.rateQuery.orderBy="",this.examAnalyse()):this.$emit("showPage","1")},repeatSet:function(){var t={id:this.testId,testName:this.testName,testTime:this.testTime,topicType_list:this.topicType_list,examineSubjectId:this.info.examine.examineSubjectId};this.$emit("showPage","6",t)},currentTree:function(){var t=this;this.treeLoading=!0,Object(o["a"])(this.treeList).then(function(e){t.treeData=e.data.children,setTimeout(function(){t.treeLoading=!1},1)})},selectUser:function(t){this.listQuery.organId=t.id,this.listQuery.organName=t.text,this.showTree=!1},openOriginTest:function(){if("1"===this.finishStatus){var t={id:this.testId,examineId:this.testId,flag:"1"};this.$emit("showPage","3",t)}else this.$notify({title:"提示",message:"您尚未参加考试，没有查看权限！",duration:1500,type:"warning"})},examAnalyse:function(){var t=this;this.tableLoading=!0,Object(o["b"])(this.rateQuery).then(function(e){"0"===e.data.code?(t.tableData=e.data.list,setTimeout(function(){t.tableLoading=!1},1)):t.$notify({title:"提示",message:e.data.msg,duration:1500,type:"warning"})})},showQuanjuList:function(t){this.rateQuery.organId=t.organId,this.rateList.organId=t.organId,this.listQuery.deptId=t.organId,this.treeList.organId=t.organId,this.showAll=2,this.examAnalyse(),this.getExamineTotal()},handleCommand:function(t){this.commandType=t,"按人员"===t?(this.showAll=3,this.getRepeatTestList(),this.currentTree()):(this.showAll=2,this.examAnalyse())},exportFn:function(){1===this.showAll?window.location.href="/app/xlgl/xlglexamexamine/importExcel?examineId="+this.testId+"&status=0&access_token="+this.$store.state.user.token:2===this.showAll?window.location.href="/app/xlgl/xlglexamexamine/importExcel?examineId="+this.testId+"&status=0&type=0&deptId="+this.listQuery.deptId+"&access_token="+this.$store.state.user.token:3===this.showAll&&(this.activeName,window.location.href="/app/xlgl/xlglexamexamine/importExcel?examineId="+this.testId+"&status=0&type=1&deptId="+this.listQuery.deptId+"&isNotExam="+this.listQuery.isNotExam+"&organId="+this.listQuery.organId+"&makeupStatus="+this.listQuery.makeupStatus+"&level="+this.listQuery.level+"&replyUserName="+this.listQuery.replyUserName+"&access_token="+this.$store.state.user.token)},changeTableSort:function(t){t.prop?("raioAll"===t.prop&&("ascending"===t.order?(this.rateQuery.orderBy="1-asc",this.examAnalyse()):"descending"===t.order&&(this.rateQuery.orderBy="1-desc",this.examAnalyse())),"excellentlv"===t.prop&&("ascending"===t.order?(this.rateQuery.orderBy="2-asc",this.examAnalyse()):"descending"===t.order&&(this.rateQuery.orderBy="2-desc",this.examAnalyse())),"finelv"===t.prop&&("ascending"===t.order?(this.rateQuery.orderBy="3-asc",this.examAnalyse()):"descending"===t.order&&(this.rateQuery.orderBy="3-desc",this.examAnalyse())),"passlv"===t.prop&&("ascending"===t.order?(this.rateQuery.orderBy="4-asc",this.examAnalyse()):"descending"===t.order&&(this.rateQuery.orderBy="4-desc",this.examAnalyse()))):(this.rateQuery.orderBy="",this.examAnalyse())}}},c=r,p=(a("cab2"),a("2877")),u=Object(p["a"])(c,i,s,!1,null,"35da8e97",null);e["default"]=u.exports},c241:function(t,e,a){},cab2:function(t,e,a){"use strict";var i=a("c241"),s=a.n(i);s.a}}]);