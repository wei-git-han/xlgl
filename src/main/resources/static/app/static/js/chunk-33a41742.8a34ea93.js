(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33a41742"],{4209:function(t,e,i){},6237:function(t,e,i){"use strict";i.d(e,"h",function(){return a}),i.d(e,"d",function(){return s}),i.d(e,"j",function(){return r}),i.d(e,"c",function(){return l}),i.d(e,"f",function(){return u}),i.d(e,"e",function(){return o}),i.d(e,"g",function(){return p}),i.d(e,"i",function(){return c}),i.d(e,"l",function(){return d}),i.d(e,"k",function(){return m}),i.d(e,"a",function(){return h}),i.d(e,"b",function(){return f});var n=i("b775");function a(t){return Object(n["a"])({url:"/app/xlgl/xlglexamexamine/list",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/app/xlgl/xlglexamexamine/view/examine",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/app/xlgl/xlglexamanswer/saveBatch",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/app/xlgl/xlglexamexamine/conutInto",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/app/xlgl/xlglexammainanswer/list",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/app/xlgl/xlglexamexamine/examineTotal",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/app/xlgl/xlglexamexamine/topicTypeCount",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/app/xlgl/xlglexamexaminemakeup/save",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/app/xlgl/xlglexamexamine/saveOrUpdate",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/app/xlgl/xlglexamanswer/saveBatchLIANXI",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/app/xlgl/sysorgan/currenttree",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/app/xlgl/xlglexamexamine/examAnalyse",method:"post",data:t})}},"63ab":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"createTest"},[i("title-card",{attrs:{"title-text":t.cardTitle}}),t._v(" "),i("svg-icon",{staticClass:"icon",staticStyle:{float:"right",cursor:"pointer","margin-top":"-30px","margin-right":"20px"},attrs:{"icon-class":"goback"},on:{click:t.goBack}}),t._v(" "),i("div",{staticClass:"pageContent"},[i("el-col",{attrs:{span:10}},[i("el-form",{ref:"form",staticClass:"oraganForm",attrs:{model:t.listQuery,rules:t.rules,"label-width":"150px",inline:!0}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"考试科目选择：",prop:"examineSubjectId"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.listQuery.examineSubjectId,callback:function(e){t.$set(t.listQuery,"examineSubjectId",e)},expression:"listQuery.examineSubjectId"}},t._l(t.subjectListAll,function(t){return i("el-option",{key:t.id,attrs:{label:t.subjectName,value:t.id}})}),1)],1)],1),t._v(" "),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"考试时长：",prop:"examineDate"}},[i("el-input",{attrs:{placeholder:"请输入考试时长"},model:{value:t.listQuery.examineDate,callback:function(e){t.$set(t.listQuery,"examineDate",e)},expression:"listQuery.examineDate"}},[i("template",{slot:"append"},[t._v("分")])],2)],1)],1),t._v(" "),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"考试类别："}},[i("el-radio-group",{model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},[i("el-radio",{attrs:{label:0}},[t._v("模拟考试练习")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("自定义练习")])],1)],1)],1)],1)],1),t._v(" "),t.listQuery.state?i("el-col",{staticStyle:{background:"#EEF5FF",padding:"10px 20px",color:"#4794E9","max-height":"150px"},attrs:{span:14}},[t._v("\n      "+t._s(t.listQuery.state)+"\n    ")]):t._e(),t._v(" "),i("el-row",{staticStyle:{"margin-top":"150px"}},[i("el-col",{attrs:{span:24}},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{float:"left"}},[t._v("题型设置")]),t._v(" "),i("span",[t._v("合计：")]),t._v(" "),0===t.listQuery.status?i("span",[t._v(t._s(t.setTypes.totalGradeNum)+"分")]):t._e(),t._v(" "),1===t.listQuery.status?i("span",[t._v(t._s(t.setTypes.totalTestNum)+"题")]):t._e()]),t._v(" "),i("el-form",{staticClass:"oraganForm",attrs:{"label-width":"",inline:!0}},t._l(t.setTypes,function(e,n){return i("el-row",{key:n,attrs:{type:"flex",justify:"center"}},[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"题型：",prop:"type"}},[i("el-select",{directives:[{name:"required",rawName:"v-required"}],attrs:{placeholder:"请选择",clearable:""},on:{change:t.selectType,clear:function(e){return t.cancelSelect(n)}},model:{value:e.type1,callback:function(i){t.$set(e,"type1",i)},expression:"obj.type1"}},t._l(t.typeList,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,disabled:t.disabled,value:t.type}})}),1)],1)],1),t._v(" "),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{label:" "}},[i("el-input",{directives:[{name:"limit-num",rawName:"v-limit-num"}],attrs:{placeholder:"请输入多少道题"},model:{value:e.testNum,callback:function(i){t.$set(e,"testNum",i)},expression:"obj.testNum"}},[i("template",{slot:"append"},[t._v("题")])],2)],1)],1),t._v(" "),0===t.listQuery.status?i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{label:" "}},[i("el-col",{attrs:{span:24}},[i("el-input",{directives:[{name:"limit-num",rawName:"v-limit-num"}],attrs:{placeholder:"请输入多少分"},model:{value:e.testPrice,callback:function(i){t.$set(e,"testPrice",i)},expression:"obj.testPrice"}},[i("template",{slot:"append"},[t._v("分")])],2)],1)],1)],1):t._e()],1)}),1)],1)],1)],1),t._v(" "),i("el-row",{staticStyle:{"text-align":"center",margin:"40px 0px 20px"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.repeatTestSave}},[t._v("开始练习")]),t._v(" "),i("el-button",{on:{click:t.goBack}},[t._v("取消")])],1)],1)],1)},a=[],s=(i("7f7f"),i("35b7")),r=i("6237"),l=i("bafa"),u=i("e64d"),o={name:"PriticeTestSet",components:{TitleCard:s["a"]},directives:{required:{inserted:function(t){t.firstElementChild.firstElementChild.addEventListener("blur",function(){var e=t.firstElementChild.firstElementChild.value,i="blobk",n="",a="red";t.nextSibling&&"div"===t.nextSibling.parentNode.lastChild.localName&&t.nextSibling.parentNode.removeChild(t.nextSibling.parentNode.lastChild);var s=document.createElement("div");e.length<1?n="非空":(i="none",a="#dcdfe6"),t.firstElementChild.style.borderColor=a,s.innerText=n,s.style.display=i,s.style.color="red",t.nextSibling&&t.nextSibling.parentNode.appendChild(s)})}},limitNum:{inserted:function(t){t.firstElementChild.addEventListener("blur",function(){var e=t.firstElementChild.value,i="blobk",n="",a="red";t.nextSibling&&"div"===t.nextSibling.parentNode.lastChild.localName&&t.nextSibling.parentNode.removeChild(t.nextSibling.parentNode.lastChild);var s=document.createElement("div");e.length<1?n="非空":/^[1-9]\d*$/.test(e)?(i="none",a="#dcdfe6"):n="只能输入0以外的正整数",t.firstElementChild.style.borderColor=a,s.innerText=n,s.style.display=i,s.style.color="red",t.nextSibling?t.nextSibling.parentNode.appendChild(s):t.parentNode.appendChild(s)})}}},filters:{typeFilter:function(t){return"1"===t?"单选题":"2"===t?"多选题":"3"===t?"判断题":"4"===t?"填空题":"5"===t?"简答题":void 0}},props:{testId:{type:String,default:""},testName:{type:String,default:""},testTime:{type:String,default:""}},data:function(){var t=this;return{cardTitle:"自主练习",updateInfo:[],listQuery:{examineName:"",examineDate:"",examineStartDateStr:"",examineEndDateStr:"",examineAllNumber:0,examineSubjectId:"",examineSubjectName:"",IssueStatus:"0",typeAndNum:"",status:0,state:""},typesList:[{type:"1",name:"单选题"},{type:"2",name:"多选题"},{type:"3",name:"判断题"},{type:"4",name:"填空题"}],typeList:[],pickOptionStart:{disabledDate:function(e){var i=t.listQuery.examineEndDateStr;if(i)return e.getTime()>new Date(i).getTime()}},pickOptionEnd:{disabledDate:function(e){var i=t.listQuery.examineStartDateStr;if(i)return e.getTime()<new Date(i).getTime()}},subjectListAll:[],rules:{examineName:[{required:!0,message:"请输入考试名称",trigger:"blur"}],examineDate:[{validator:this.isNum,trigger:"blur"}]},testTypeList:[],errorList:[],errorOptionList:[],emptyList:[]}},computed:{setTypes:function(){return this.typeList}},watch:{setTypes:{handler:function(){var t=0,e=0;for(var i in this.setTypes){var n=this.setTypes[i];t+=this.StringToNumber(n.testNum)*this.StringToNumber(n.testPrice),e+=this.StringToNumber(n.testNum)}this.$set(this.setTypes,"totalGradeNum",t),this.$set(this.setTypes,"totalTestNum",e)},deep:!0},"listQuery.examineSubjectId":{handler:function(t,e){var i=this;this.subjectListAll.map(function(t){t.id===i.listQuery.examineSubjectId&&(i.listQuery.examineSubjectName=t.subjectName)}),this.getSubjectState(),this.getTopicNumber(),this.findTopicBySubId()},deep:!0}},created:function(){this.getSubjectListAll()},methods:{isNum:function(t,e,i){var n=/^[1-9]\d*$/;n.test(e)?i():i(new Error("只能输入除0以外的的正整数"))},repeatTestSave:function(){var t=this,e=/^[1-9]\d*$/;if(e.test(this.listQuery.examineDate)){for(var i in this.typesList){var n=this.typesList[i];n.type1&&this.errorNum(n.type1,parseInt(n.testNum))}if(this.errorList.length>0){for(var a="",s=0;s<this.errorList.length;s++)a+="<p>"+this.errorList[s].name+"，当前数量是"+this.errorList[s].inputnum+"，题库数量为"+this.errorList[s].originNum+"，组题量不能大于题库数量</p>";this.$notify({title:"提示",dangerouslyUseHTMLString:!0,message:a,duration:1500,type:"warning",onClose:function(){t.errorList=[]}}),this.errorList=[]}else{var l=[];for(var u in this.typeList){var o=this.typeList[u];if("totalGradeNum"===u||"totalTestNum"===u||"remove"===u);else if(o.hasOwnProperty("type1")){for(var p="",c=0;c<this.typesList.length;c++)o.type1===this.typesList[c].type&&(p=this.typesList[c].name);o.type1&&o.testNum&&o.testPrice?l.push(o.type1+"-"+this.StringToNumber(o.testNum)+"-"+this.StringToNumber(o.testPrice)):this.errorOptionList.push("".concat(p,"，题量，以及每道题的分支都必须输入！"))}else this.emptyList.push(o.name)}if(this.emptyList.length>0&&this.typeList.length===this.emptyList.length)this.$notify({title:"提示",message:"组题不完全不能进入考试页面！",duration:5500,type:"warning",onClose:function(){t.errorOptionList=[],t.emptyList=[]}}),this.errorOptionList=[],this.emptyList=[];else if(this.errorOptionList.length>0){for(var d="",m=0;m<this.errorOptionList.length;m++)d+="<p>"+this.errorOptionList[m]+"</p>";this.$notify({title:"提示",message:d,dangerouslyUseHTMLString:!0,duration:5500,type:"warning",onClose:function(){t.errorOptionList=[],t.emptyList=[]}}),this.errorOptionList=[],this.emptyList=[]}else{var h={examineDate:this.listQuery.examineDate,examineSubjectId:this.listQuery.examineSubjectId,examineSubjectName:this.listQuery.examineSubjectName,lianxiType:this.listQuery.status,status:1,typeAndNum:l.join(",")};Object(r["l"])(h).then(function(e){if("0"===e.data.code){var i={id:e.data.examineId};t.$emit("showPage","8",i)}else t.$notify({title:"提示",message:e.data.msg,duration:1500,type:"warning"})})}}}else this.$notify({title:"提示",message:"考试时长，只能输入除0以外的的正整数",duration:1500,type:"warning"})},goBack:function(){this.$emit("showPage","1")},selectType:function(t){for(var e=0;e<this.typeList.length;e++)this.typeList[e].type===t&&this.$set(this.typeList[e],"disabled",!0)},cancelSelect:function(t){for(var e=0;e<this.typeList.length;e++)this.typeList[e].type===this.typeList[t].type&&this.$set(this.typeList[t],"disabled",!1)},StringToNumber:function(t){return t?parseInt(t):0},getSubjectListAll:function(){var t=this;Object(l["f"])().then(function(e){t.subjectListAll=e.data.findList,t.subjectListAll.length>1&&(t.listQuery.examineSubjectId=t.subjectListAll[0].id,t.listQuery.examineSubjectName=t.subjectListAll[0].subjectName)})},getSubjectState:function(){var t=this,e={id:this.listQuery.examineSubjectId};Object(u["g"])(e).then(function(e){t.listQuery.state=e.data.state})},getTopicNumber:function(){var t=this,e={id:this.listQuery.examineSubjectId};Object(l["g"])(e).then(function(e){var i=e.data;for(var n in t.testTypeList=[],t.errorList=[],i)t.testTypeList.push(i[n])})},errorNum:function(t,e){"1"===t&&this.testTypeList[0]<e&&this.errorList.push({type:t,name:"单选题",inputnum:e,originNum:this.testTypeList[0]}),"2"===t&&this.testTypeList[1]<e&&this.errorList.push({type:t,name:"多选题",inputnum:e,originNum:this.testTypeList[1]}),"3"===t&&this.testTypeList[2]<e&&this.errorList.push({type:t,name:"判断题",inputnum:e,originNum:this.testTypeList[2]}),"4"===t&&this.testTypeList[3]<e&&this.errorList.push({type:t,name:"填空题",inputnum:e,originNum:this.testTypeList[3]})},findTopicBySubId:function(){var t=this;Object(l["c"])({subjectId:this.listQuery.examineSubjectId}).then(function(e){var i=e.data.findList.type;t.typeList=[],i.map(function(e){t.typesList.map(function(i){e===i.type&&t.typeList.push(i)})})})}}},p=o,c=(i("70a7"),i("2877")),d=Object(c["a"])(p,n,a,!1,null,"00de3f46",null);e["default"]=d.exports},"70a7":function(t,e,i){"use strict";var n=i("4209"),a=i.n(n);a.a},e64d:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"i",function(){return s}),i.d(e,"h",function(){return r}),i.d(e,"c",function(){return l}),i.d(e,"f",function(){return u}),i.d(e,"b",function(){return o}),i.d(e,"d",function(){return p}),i.d(e,"e",function(){return c}),i.d(e,"g",function(){return d}),i.d(e,"j",function(){return m}),i.d(e,"k",function(){return h}),i.d(e,"l",function(){return f});var n=i("b775");function a(t){return Object(n["a"])({url:"/app/xlgl/xlglexamsubject/save",method:"post",data:t})}function s(){return Object(n["a"])({url:"/app/xlgl/xlglexamsubject/subject",method:"get"})}function r(t){return Object(n["a"])({url:"/app/xlgl/xlglexamtopic/list",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/app/xlgl/xlglexamsubject/update",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/app/xlgl/xlglexamsubject/delete",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/app/xlgl/xlglexamtopic/delete",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/app/xlgl/xlglexamtopic/info",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/app/xlgl/xlglexamfile/list",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/app/xlgl/xlglexamsubject/getSubjectState",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/app/xlgl/xlglexamsubject/getUpLoad",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/app/xlgl/xlglexamtopic/saveTopic",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/app/xlgl/xlglexamtopic/updateTopic",method:"post",data:t})}}}]);