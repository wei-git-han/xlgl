(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61f9a085","chunk-1422ac8e","chunk-47002c6a"],{"09f4":function(e,t,i){"use strict";i.d(t,"a",function(){return l}),Math.easeInOutQuad=function(e,t,i,a){return e/=a/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,i){var l=s(),r=e-l,o=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=o;var s=Math.easeInOutQuad(u,l,r,t);n(s),u<t?a(e):i&&"function"===typeof i&&i()};c()}},"1aba":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"app-content"},[1!=e.showNoPublish?i("create-test",{attrs:{"test-id":e.testId},on:{showNoPublish:e.showNoPub}}):e._e(),e._v(" "),1==e.showNoPublish?i("no-publish",{on:{updateTest:e.showNoPub}}):e._e()],1)])},n=[],s=i("fa8e"),l=i("c87d"),r={name:"ComplexTable",components:{CreateTest:s["default"],NoPublish:l["default"]},data:function(){return{showNoPublish:"",testId:""}},methods:{showNoPub:function(e,t){"2"===e&&(this.testId=t.id),this.showNoPublish=e}}},o=r,u=(i("d0be"),i("2877")),c=Object(u["a"])(o,a,n,!1,null,"691720a4",null);t["default"]=c.exports},"330a":function(e,t,i){"use strict";var a=i("b9ad"),n=i.n(a);n.a},5161:function(e,t,i){},"9c7b":function(e,t,i){},b9ad:function(e,t,i){},b9eb:function(e,t,i){"use strict";var a=i("9c7b"),n=i.n(a);n.a},bafa:function(e,t,i){"use strict";i.d(t,"f",function(){return n}),i.d(t,"e",function(){return s}),i.d(t,"b",function(){return l}),i.d(t,"d",function(){return r}),i.d(t,"a",function(){return o}),i.d(t,"c",function(){return u});var a=i("b775");function n(e){return Object(a["a"])({url:"/app/xlgl/xlglexamexamine/saveOrUpdate",method:"post",data:e})}function s(){return Object(a["a"])({url:"/app/xlgl/xlglexamsubject/subjectListAll",method:"get"})}function l(e){return Object(a["a"])({url:"/app/xlgl/xlglexamsubject/findTopicBySubId",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/app/xlgl/xlglexamexamine/issueStatusList",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/app/xlgl/xlglexamexamine/delete",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/app/xlgl/xlglexamexamine/info",method:"post",data:e})}},c87d:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"pageContent"},[i("el-form",{ref:"form",staticClass:"oraganForm",attrs:{model:e.listQuery,"label-width":"150px",inline:!0}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"考试名称："}},[i("el-input",{model:{value:e.listQuery.examineName,callback:function(t){e.$set(e.listQuery,"examineName",t)},expression:"listQuery.examineName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSubmit}},[e._v("搜索")])],1)],1)],1),e._v(" "),i("div",{staticStyle:{height:"calc(100vh - 320px)",overflow:"hidden",width:"100%"}},[i("el-scrollbar",{staticClass:"hidden-x",staticStyle:{overflow:"hidden",height:"100%"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,attrs:{data:e.list,border:"",fit:"",stripe:""}},[i("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{label:"考试名称",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.examineName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"考试科目","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(a.examineSubjectName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center",width:"350","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("el-button",{staticClass:"noBorder editBtn",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.handleUpdate(a)}}},[e._v("编辑")]),e._v(" "),"delete"!=a.status?i("el-button",{staticClass:"noBorder deleteBtn",attrs:{size:"mini",type:"primary",icon:"el-icon-delete"},on:{click:function(t){return e.deleteIssueStatus(a)}}},[e._v("\n                删除\n              ")]):e._e()]}}])})],1)],1)],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getIssueStatusList}})],1)])},n=[],s=i("bafa"),l=i("333d"),r={name:"NoPublish",components:{Pagination:l["a"]},data:function(){return{tableKey:0,list:null,total:0,listLoading:!0,listQuery:{examineName:"",page:1,limit:10}}},created:function(){this.getIssueStatusList()},methods:{getIssueStatusList:function(){var e=this;this.listLoading=!0,Object(s["d"])(this.listQuery).then(function(t){e.list=t.data.page.list,e.total=t.data.page.totalCount,setTimeout(function(){e.listLoading=!1},1500)})},onSubmit:function(){this.getIssueStatusList()},handleUpdate:function(e){this.$emit("updateTest","2",e)},deleteIssueStatus:function(e){var t=this;Object(s["a"])({ids:e.id}).then(function(e){0===e.data.code?t.$message({type:"success",message:"删除成功!",onClose:function(){t.getIssueStatusList()}}):t.$message({type:"info",message:e.data.msg})})}}},o=r,u=(i("b9eb"),i("2877")),c=Object(u["a"])(o,a,n,!1,null,"226c3488",null);t["default"]=c.exports},d0be:function(e,t,i){"use strict";var a=i("5161"),n=i.n(a);n.a},e78c:function(e,t,i){"use strict";var a=i("fdc5"),n=i.n(a);n.a},fa8e:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"createTest"},[i("title-card",{attrs:{"title-text":e.cardTitle}}),e._v(" "),i("el-button",{staticClass:"noPublish",attrs:{size:"mini",type:"primary"},on:{click:e.showNoPublish}},[e._v("查看未发布考核")]),e._v(" "),i("div",{staticClass:"pageContent"},[i("el-form",{ref:"form",staticClass:"oraganForm",attrs:{model:e.listQuery,rules:e.rules,"label-width":"150px",inline:!0}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"考试名称：",prop:"examineName"}},[i("el-input",{model:{value:e.listQuery.examineName,callback:function(t){e.$set(e.listQuery,"examineName",t)},expression:"listQuery.examineName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"考试时长：",prop:"examineDate"}},[i("el-input",{attrs:{placeholder:"请输入考试时长"},model:{value:e.listQuery.examineDate,callback:function(t){e.$set(e.listQuery,"examineDate",t)},expression:"listQuery.examineDate"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"考试时间：",required:""}},[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{prop:"examineStartDateStr"}},[i("el-date-picker",{attrs:{type:"datetime","picker-options":e.pickOptionStart,placeholder:"选择开始时间"},model:{value:e.listQuery.examineStartDateStr,callback:function(t){e.$set(e.listQuery,"examineStartDateStr",t)},expression:"listQuery.examineStartDateStr"}})],1)],1),e._v(" "),i("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("至")]),e._v(" "),i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{prop:"examineEndDateStr"}},[i("el-date-picker",{attrs:{type:"datetime","picker-options":e.pickOptionEnd,placeholder:"选择结束时间"},model:{value:e.listQuery.examineEndDateStr,callback:function(t){e.$set(e.listQuery,"examineEndDateStr",t)},expression:"listQuery.examineEndDateStr"}})],1)],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"考试科目选择：",prop:"examineSubjectId"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.listQuery.examineSubjectId,callback:function(t){e.$set(e.listQuery,"examineSubjectId",t)},expression:"listQuery.examineSubjectId"}},e._l(e.subjectListAll,function(e){return i("el-option",{key:e.id,attrs:{label:e.subjectName,value:e.id}})}),1)],1)],1)],1),e._v(" "),i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{float:"left"}},[e._v("题型设置")]),e._v(" "),i("span",[e._v("合计：")]),e._v(" "),i("span",[e._v(e._s(e.setTypes.totalGradeNum)+"分")]),e._v(" "),i("span",[e._v(e._s(e.setTypes.totalTestNum)+"题")])]),e._v(" "),e.setTypes.length<1?i("div",[e._v("\n        该科目无题型\n      ")]):e._e(),e._v(" "),i("el-form",{staticClass:"oraganForm",attrs:{"label-width":"",inline:!0}},e._l(e.setTypes,function(t,a){return i("el-row",{key:a,attrs:{type:"flex",justify:"center"}},[i("el-col",{attrs:{span:1}},[i("span",{staticClass:"spanPosition"},[e._v("*")])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"题型：",prop:"type"}},[i("el-select",{directives:[{name:"required",rawName:"v-required"}],attrs:{placeholder:"请选择",clearable:""},on:{change:function(t){return e.selectType(a)},clear:function(t){return e.cancelSelect(a)}},model:{value:t.type1,callback:function(i){e.$set(t,"type1",i)},expression:"obj.type1"}},e._l(e.typeList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,disabled:e.disabled,value:e.type}})}),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:" "}},[i("el-input",{directives:[{name:"limit-num",rawName:"v-limit-num"}],attrs:{placeholder:"请输入多少道题"},model:{value:t.testNum,callback:function(i){e.$set(t,"testNum",i)},expression:"obj.testNum"}},[i("template",{slot:"append"},[e._v("题")])],2)],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:" "}},[i("el-col",{attrs:{span:24}},[i("el-input",{directives:[{name:"limit-num",rawName:"v-limit-num"}],attrs:{placeholder:"请输入多少分"},model:{value:t.testPrice,callback:function(i){e.$set(t,"testPrice",i)},expression:"obj.testPrice"}},[i("template",{slot:"append"},[e._v("分")])],2)],1)],1)],1)],1)}),1)],1),e._v(" "),i("el-row",{staticStyle:{"text-align":"center",margin:"40px 0px 20px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.publicTest("1")}}},[e._v("发起考试")]),e._v(" "),i("el-button",{on:{click:function(t){return e.publicTest("0")}}},[e._v("保存")])],1)],1)],1)},n=[],s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"titleDIv"},[i("div",[i("span",{staticClass:"textDiv"}),e._v(e._s(e.titleText)+"\n  ")])])},l=[],r={name:"TitleIndex",props:{titleText:{type:String,default:""}}},o=r,u=(i("e78c"),i("2877")),c=Object(u["a"])(o,s,l,!1,null,"76327ba4",null),d=c.exports,m=i("bafa"),p={name:"NoPublish",components:{TitleCard:d},directives:{required:{inserted:function(e){e.firstElementChild.firstElementChild.addEventListener("blur",function(){var t=e.firstElementChild.firstElementChild.value,i="blobk",a="",n="red";e.nextSibling&&"div"===e.nextSibling.parentNode.lastChild.localName&&e.nextSibling.parentNode.removeChild(e.nextSibling.parentNode.lastChild);var s=document.createElement("div");t.length<1?a="非空":(i="none",n="#dcdfe6"),e.firstElementChild.style.borderColor=n,s.innerText=a,s.style.display=i,s.style.color="red",e.nextSibling&&e.nextSibling.parentNode.appendChild(s)})}},limitNum:{inserted:function(e){e.firstElementChild.addEventListener("blur",function(){var t=e.firstElementChild.value,i="blobk",a="",n="red";e.nextSibling&&"div"===e.nextSibling.parentNode.lastChild.localName&&e.nextSibling.parentNode.removeChild(e.nextSibling.parentNode.lastChild);var s=document.createElement("div");t.length<1?a="非空":/^[1-9]\d*$/.test(t)?(i="none",n="#dcdfe6"):a="只能输入0以外的正整数",e.firstElementChild.style.borderColor=n,s.innerText=a,s.style.display=i,s.style.color="red",e.nextSibling?e.nextSibling.parentNode.appendChild(s):e.parentNode.appendChild(s)})}}},props:{testId:{type:String,default:""}},data:function(){var e=this;return{cardTitle:"创建考核",tableKey:0,list:null,total:0,listLoading:!0,listQuery:{examineName:"",examineDate:"",examineStartDateStr:"",examineEndDateStr:"",examineAllNumber:0,examineSubjectId:"",examineSubjectName:"测试科目",IssueStatus:"0",typeAndNum:"",status:0},typesList:[{type:"1",name:"单选题"},{type:"2",name:"多选题"},{type:"3",name:"判断题"},{type:"4",name:"填空题"},{type:"5",name:"简答题"}],pickOptionStart:{disabledDate:function(t){var i=e.listQuery.examineEndDateStr;if(i)return t.getTime()>new Date(i).getTime()}},pickOptionEnd:{disabledDate:function(t){var i=e.listQuery.examineStartDateStr;if(i)return t.getTime()<new Date(i).getTime()}},subjectListAll:[],typeList:[],rules:{examineName:[{required:!0,message:"请输入考试名称",trigger:"blur"}],examineDate:[{required:!0,message:"请输入考试时长",trigger:"blur"},{validator:this.isNum,trigger:"blur"}],examineStartDateStr:[{required:!0,message:"请输入开始时间",trigger:"blur"}],examineEndDateStr:[{required:!0,message:"请输入结束时间",trigger:"blur"}],examineSubjectId:[{required:!0,message:"请选择考试科目",trigger:"change"}]}}},computed:{setTypes:function(){return this.typeList}},watch:{"listQuery.examineSubjectId":{handler:function(e,t){var i=this;this.subjectListAll.map(function(e){e.id===i.listQuery.examineSubjectId&&(i.listQuery.examineSubjectName=e.subjectName,i.findTopicBySubId())})},deep:!0},setTypes:{handler:function(){var e=0,t=0;for(var i in this.setTypes){var a=this.setTypes[i];e+=this.StringToNumber(a.testNum)*this.StringToNumber(a.testPrice),t+=this.StringToNumber(a.testNum)}this.$set(this.setTypes,"totalGradeNum",e),this.$set(this.setTypes,"totalTestNum",t)},deep:!0}},created:function(){this.getSubjectListAll(),this.testId&&this.getInfoById()},methods:{publicTest:function(e){this.listQuery.IssueStatus=e;var t=[],i=0,a=!1,n="";for(var s in this.setTypes)if("totalGradeNum"!==s&&"totalTestNum"!==s){var l=this.setTypes[s];l.testNum&&l.testPrice&&l.type1?(i+=parseInt(l.testNum)*parseInt(l.testPrice),t.push(l.type1+"-"+l.testNum+"-"+l.testPrice)):(n="题型设置中每组输入框都必须输入",a=!0)}this.setTypes.totalGradeNum<=0&&(n="请填写题型及分数",a=!0),this.listQuery.examineEndDateStr||(n="请输入考试结束时间",a=!0),this.listQuery.examineStartDateStr||(n="请输入考试开始时间",a=!0),this.listQuery.examineSubjectId||(n="请选择考试科目",a=!0),this.listQuery.examineDate||(n="请输入考试时长",a=!0),this.listQuery.examineName||(n="请输入考试名称",a=!0),this.listQuery.typeAndNum=t.join(","),this.listQuery.status=0,this.listQuery.examineAllNumber=i,a?this.$message({message:n,type:"info"}):this.saveTestPaper(e)},saveTestPaper:function(e){var t=this,i="发起考试成功！";"0"===e&&(i="保存成功！"),Object(m["f"])(this.listQuery).then(function(e){0===e.data.code?t.$message({type:"success",message:i,onClose:function(){t.handleClose(),t.getTestList()}}):t.$message({type:"info",message:e.data.msg})})},getSubjectListAll:function(){var e=this;Object(m["e"])().then(function(t){e.subjectListAll=t.data.findList,e.subjectListAll.length>1&&(e.listQuery.examineSubjectId=e.subjectListAll[0].id)})},findTopicBySubId:function(){var e=this;Object(m["b"])({subjectId:this.listQuery.examineSubjectId}).then(function(t){var i=t.data.findList.type;e.typeList=[],i.map(function(t){e.typesList.map(function(i){t===i.type&&e.typeList.push(i)})})})},isNum:function(e,t,i){var a=/^[1-9]\d*$/;a.test(t)?i():i(new Error("只能输入除0以外的的正整数"))},selectType:function(e){this.$set(this.typeList[e],"disabled",!0)},cancelSelect:function(e){for(var t in this.typeList)this.setTypes[e].type===this.typeList[t].type&&this.$set(this.typeList[e],"disabled",!1)},StringToNumber:function(e){return e?parseInt(e):0},showNoPublish:function(){this.$emit("showNoPublish",1)},getInfoById:function(){var e=this;Object(m["c"])({id:this.testId}).then(function(t){e.listQuery=t.data.xlglExamExamine})}}},f=p,b=(i("330a"),Object(u["a"])(f,a,n,!1,null,"f19f32ce",null));t["default"]=b.exports},fdc5:function(e,t,i){}}]);