(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d187cca"],{"92fb":function(e,t,s){},"981f":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-card",{staticStyle:{padding:"0px 0px 0px 100px"}},[s("el-row",{staticStyle:{height:"calc(100vh - 100px)","overflow-y":"scroll"},attrs:{gutter:20}},[s("el-form",{staticClass:"question-title-form",attrs:{"label-width":"60px","label-position":"left"}},[s("el-col",{attrs:{span:24,xs:24}},[s("div",{staticClass:"question"},[s("div",{staticClass:"question-title"},[e._v("\n              "+e._s(e.questionData.surveyName)+"\n            ")])])]),e._v(" "),s("el-col",{attrs:{span:6,offset:6}},[s("el-form-item",{attrs:{label:"姓名"}},[s("el-input",{staticClass:"border-bottom-input",model:{value:e.answer.userName,callback:function(t){e.$set(e.answer,"userName",t)},expression:"answer.userName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"年龄"}},e._l(e.questionData.ageList,function(t,a){return s("el-radio",{key:a,attrs:{label:t.id},model:{value:e.answer.age,callback:function(t){e.$set(e.answer,"age",t)},expression:"answer.age"}},[e._v(e._s(t.typeExtendName))])}),1)],1),e._v(" "),s("el-col",{attrs:{span:6,offset:10}},[s("el-form-item",{attrs:{label:"性别"}},e._l(e.questionData.sexList,function(t,a){return s("el-radio",{key:a,attrs:{label:t.id},model:{value:e.answer.sex,callback:function(t){e.$set(e.answer,"sex",t)},expression:"answer.sex"}},[e._v(e._s(t.typeExtendName))])}),1)],1),e._v(" "),s("el-col",{attrs:{span:10,offset:8}},[s("el-form-item",{attrs:{label:"营区"}},e._l(e.questionData.campList,function(t,a){return s("el-radio",{key:a,attrs:{label:t.id},model:{value:e.answer.camp,callback:function(t){e.$set(e.answer,"camp",t)},expression:"answer.camp"}},[e._v(e._s(t.typeExtendName))])}),1)],1)],1),e._v(" "),s("el-form",[[s("el-col",{staticClass:"question-content",attrs:{span:24}},e._l(e.questionData.questionArray,function(t,a){return s("div",{key:a},[s("el-form-item",{attrs:{label:a+1+"."+t.questionContent+"（"+t.questionTopicTypeName+"）"}},[s("br"),e._v(" "),"single_choice"==t.questionTopicTypeId?e._l(t.optionsList,function(a,n){return s("el-radio",{key:n,staticStyle:{"font-weight":"600","font-size":"18px"},attrs:{label:a.id},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"ques2.value"}},[e._v(e._s(a.optionContent))])}):"multiple_choice"==t.questionTopicTypeId?[s("el-checkbox-group",{model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"ques2.value"}},e._l(t.optionsList,function(t,a){return s("el-checkbox",{key:a,attrs:{label:t.id}},[e._v(e._s(t.optionContent))])}),1)]:[s("el-input",{staticClass:"border-bottom-input",attrs:{maxlength:"150"},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"ques2.value"}})]],2)],1)}),0)]],2)],1),e._v(" "),s("div",{staticClass:"text-center"},[s("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:e.save}},[e._v("完成问卷调查")])],1)],1)],1)},n=[],i=(s("8e6e"),s("456d"),s("ac6a"),s("bd86")),r=(s("7f7f"),s("53f5")),o=s("2f62");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(s,!0).forEach(function(t){Object(i["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var c={name:"WjQuestion",components:{},data:function(){return{questionData:{questionArray:[],sexList:[],ageList:[],campList:[],surveyName:null},answer:{userName:this.name,sex:null,age:null,camp:null},query:this.$route.query,saving:!1}},computed:l({},Object(o["b"])(["name","hasWjdc"])),created:function(){this.query.id||this.$router.push({path:"/wjQuestion/list"}),this.answer.userName=this.name,this.querySurveyQuestionList(),this.$store.dispatch("user/setIsQuestion",!0)},methods:{querySurveyQuestionList:function(){var e=this;Object(r["d"])({serveyQuestionId:this.query.id}).then(function(t){var s=t.data.surveyQuestionList.questionArray,a=t.data.surveyQuestionList.userArray;s.forEach(function(e){"multiple_choice"!==e.questionTopicTypeId?e.value=null:e.value=[]});var n=[],i=[],r=[];a.forEach(function(e){"SEX"===e.typeId?n.push(e):"AGE"===e.typeId?i.push(e):"CAMP"===e.typeId&&r.push(e)}),e.questionData={questionArray:s,sexList:n,ageList:i,campList:r,surveyName:t.data.surveyQuestionList.surveyName}})},save:function(){var e=this,t=[],s=!0;this.saving||(this.questionData.questionArray.forEach(function(e){e.value||(s=!1);var a=e.value;"multiple_choice"===e.questionTopicTypeId&&(a=e.value.join(",")),t.push({questionTopicId:e.topicId,questionTopicOptionId:a})}),s?this.answer.userName?this.answer.age?this.answer.sex?this.answer.camp?(this.saving=!0,Object(r["e"])({surverQuestionId:this.query.id,surveyQuestionAnswer:JSON.stringify(t),userName:this.answer.userName,extendInfoId:this.answer.age+","+this.answer.sex+","+this.answer.camp}).then(function(t){0===t.data.code?(e.$store.dispatch("user/isSave").then(function(e){}),e.$alert("您已成功完成问卷调查！即将返回问卷调查列表","提示",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/wjQuestion/list"})}})):e.$alert("您已完成过本次问卷调查，请勿重复提交！")})):this.$alert("请选择营区后再进行提交！"):this.$alert("请选择性别再进行提交！"):this.$alert("请选择年龄后再进行提交！"):this.$alert("请填写完用户名再进行提交！"):this.$alert("请填写完成选项再进行提交！"))}},beforeDestroy:function(){this.$store.dispatch("user/setIsQuestion",!1)}},p=c,f=(s("a242"),s("2877")),v=Object(f["a"])(p,a,n,!1,null,null,null);t["default"]=v.exports},a242:function(e,t,s){"use strict";var a=s("92fb"),n=s.n(a);n.a}}]);