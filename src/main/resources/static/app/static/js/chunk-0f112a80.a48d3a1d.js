(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f112a80"],{"1dcd":function(e,t,s){"use strict";var i=s("c8d0"),a=s.n(i);a.a},"9ef8":function(e,t,s){"use strict";s.d(t,"b",function(){return a}),s.d(t,"a",function(){return l});var i=s("b775");function a(e){return Object(i["a"])({url:"/app/xlgl/xlglcarsmanager/getFileList",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/app/xlgl/xlglcarsmanager/delete",method:"post",data:e})}},c8d0:function(e,t,s){},feea:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:14}},[s("div",{staticClass:"div1"},[s("iframe",{attrs:{src:e.onlineFileUrl,frameborder:"0",width:"100%",height:"100%"}})])]),e._v(" "),s("el-col",{attrs:{span:10}},[s("div",{staticClass:"div1"},[s("div",{staticStyle:{"margin-bottom":"10px"}},["0"===e.show||"1"===e.show||"3"===e.show?s("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.openDialog}},[e._v("导入")]):e._e()],1),e._v(" "),s("div",{staticClass:"div2"},[s("el-scrollbar",{staticClass:"hidden-x",staticStyle:{overflow:"hidden",height:"100%"}},[s("el-table",{key:e.tableKey,ref:"filetable",attrs:{data:e.fileList,border:"",fit:"","highlight-current-row":""},on:{"row-click":e.handleCurrent}},[s("el-table-column",{attrs:{label:"文件名",align:"center",width:"230px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[s("span",[e._v(e._s(i.fileName))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"上传时间",width:"140px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[s("span",[e._v(e._s(i.createdTime))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"上传人",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[s("span",[e._v(e._s(i.uploadUser))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return["0"===e.show||"1"===e.show||"3"===e.show?s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return t.stopPropagation(),e.handleModifyStatus(i,"delete")}}},[e._v("删除")]):e._e(),e._v(" "),s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return t.stopPropagation(),e.handleModifyStatus(i,"down")}}},[e._v("下载")])]}}])})],1)],1)],1)])])],1),e._v(" "),s("el-dialog",{attrs:{title:"上传附件",visible:e.fileDialog,width:"40%","before-close":e.closeFileDialog},on:{"update:visible":function(t){e.fileDialog=t}}},[s("div",{staticClass:"centerPosition"},[s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"","auto-upload":!1,"with-credentials":!0,action:e.fileUploadUrl,data:e.fileData,accept:".pdf","on-success":e.successFile,"on-error":e.errorFile}},[s("i",{staticClass:"el-icon-upload"}),e._v(" "),s("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),s("em",[e._v("点击上传")])]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只支持上传pdf格式文件")])])],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.submitFile}},[e._v("确 定")]),e._v(" "),s("el-button",{on:{click:e.closeFileDialog}},[e._v("取 消")])],1)])],1)},a=[],l=s("9ef8"),o={name:"DetailFiles",props:{fileList:{type:Array,default:function(){return[]}}},data:function(){return{show:this.$store.state.user.userInfo.adminFlag,tableKey:0,fileDialog:!1,fileData:{access_token:this.$store.state.user.token},fileUploadUrl:"/app/xlgl/xlglcarsmanager/uploadFile",onlineFileUrl:""}},mounted:function(){this.$refs.filetable.setCurrentRow(this.fileList[0]);var e=this.fileList[0].fileName,t=e.substring(e.lastIndexOf(".")+1).toLocaleUpperCase();"PDF"===t?this.onlineFileUrl="/app/pdf.js/web/viewer.html?fileId="+this.fileList[0].infoId+"&access_token="+this.$store.state.user.token:this.$message({type:"info",message:"请下载对应的文件再进行查看！"})},methods:{handleCurrent:function(e){this.$refs.filetable.setCurrentRow(e);var t=e.fileName,s=t.substring(t.lastIndexOf(".")+1).toLocaleUpperCase();"PDF"===s?this.onlineFileUrl="/app/pdf.js/web/viewer.html?fileId="+e.infoId+"&access_token="+this.$store.state.user.token:this.$message({type:"info",message:"请下载对应的文件再进行查看！"})},handleModifyStatus:function(e,t){var s=this;"down"===t?window.location.href="xlgl/xlglcarsmanager/downLoadFile?fileId="+e.infoId+"&access_token="+this.$store.state.user.token:Object(l["a"])({id:e.id}).then(function(e){"success"===e.data.result?s.$message({type:"success",message:"删除成功!",onClose:function(){s.$parent.getCarFileList()}}):s.$message({type:"info",message:e.data.msg})})},openDialog:function(){this.fileDialog=!0},closeFileDialog:function(){this.$refs.upload.clearFiles(),this.fileDialog=!1},submitFile:function(){this.$refs.upload.submit()},successFile:function(e){var t=this;e.fileId&&e.fileId.length>0?this.$message({type:"success",message:"上传成功!",onClose:function(){t.$parent.getCarFileList(),t.closeFileDialog()}}):this.$message({type:"info",message:"上传失败!"})},errorFile:function(){this.$message({type:"info",message:"上传失败!"})}}},n=o,r=(s("1dcd"),s("2877")),c=Object(r["a"])(n,i,a,!1,null,"927b0868",null);t["default"]=c.exports}}]);