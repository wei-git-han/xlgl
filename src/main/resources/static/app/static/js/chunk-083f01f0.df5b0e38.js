(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-083f01f0"],{"0460":function(e,t,n){"use strict";var a=n("d87c"),i=n.n(a);i.a},"06c9":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-card",[n("div",{staticStyle:{height:"40px","text-align":"right"}},[n("el-button",{staticClass:"addBtn noBorder",attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addPeople}},[e._v("增加")]),e._v(" "),n("el-button",{staticClass:"deleteBtn1 noBorder",attrs:{type:"primary",icon:"el-icon-delete",size:"small"},on:{click:e.deleteUser}},[e._v("删除")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,attrs:{data:e.list,border:"",fit:"",stripe:"","highlight-current-rowstyle":"width: 100%;"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{label:"姓名",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.userName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"单位名称","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.orgName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"350","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-button",{staticClass:"noBorder editBtn",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.handleUpdate(a)}}},[e._v("编辑")]),e._v(" "),"delete"!=a.status?n("el-button",{staticClass:"noBorder deleteBtn",attrs:{size:"mini",type:"primary",icon:"el-icon-delete"},on:{click:function(t){return e.deleteUser(a)}}},[e._v("\n            删除\n          ")]):e._e()]}}])})],1),e._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.pagesize},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"pagesize",t)},pagination:e.getAdminsetJuList}})],1),e._v(" "),n("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.resetTemp}},[n("el-form",{ref:"dataForm",staticStyle:{margin:"0px 50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"100px"}},[n("el-form-item",{attrs:{label:"姓名：",prop:"userName"}},[n("el-popover",{attrs:{placement:"bottom-start",width:"400",trigger:"click"},model:{value:e.showUserTree,callback:function(t){e.showUserTree=t},expression:"showUserTree"}},[n("el-scrollbar",{staticClass:"hidden-x",staticStyle:{height:"400px"}},[n("el-tree",{ref:"userTree",attrs:{data:e.userTreeData,props:e.defaultProps,"node-key":"id","default-expanded-keys":["root"]},on:{"node-click":e.selectUser}})],1),e._v(" "),n("el-input",{attrs:{slot:"reference",placeholder:"请输入姓名",readonly:"readonly"},slot:"reference",model:{value:e.temp.userName,callback:function(t){e.$set(e.temp,"userName",t)},expression:"temp.userName"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单：",prop:"userName"}},[n("el-popover",{attrs:{placement:"bottom-start",width:"400",trigger:"click"},model:{value:e.showMenuTree,callback:function(t){e.showMenuTree=t},expression:"showMenuTree"}},[n("el-scrollbar",{staticClass:"hidden-x",staticStyle:{height:"400px"}},[n("el-tree",{ref:"menuTree",attrs:{data:e.menuTreeData,"show-checkbox":"",props:e.defaultProps,"node-key":"id","default-expanded-keys":["root"]}})],1),e._v(" "),n("el-input",{attrs:{slot:"reference",placeholder:"请选择菜单",readonly:"readonly"},slot:"reference",model:{value:e.temp.paramName,callback:function(t){e.$set(e.temp,"paramName",t)},expression:"temp.paramName"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.updateData}},[e._v("确定")]),e._v(" "),n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)},i=[],r=(n("ac6a"),n("d8e5")),s=n("8f39"),o=n("a417"),l=n("333d"),c={name:"BusinessConfig",components:{Pagination:l["a"]},data:function(){return{tableKey:0,list:null,total:0,listLoading:!0,listQuery:{page:1,pagesize:10,adminType:"2"},departList:[],rolesList:[],collectList:[],temp:{id:"",userName:"",uid:"",param:""},defaultProps:{children:"children",label:"text"},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"新增",connect:"权限交接"},roleList:[{id:"1",text:"部管理员"},{id:"2",text:"局管理员"},{id:"4",text:"处管理员"}],certigierList:[],showUserTree:!1,showMenuTree:!1,rules:{},userTreeData:[],menuTreeData:[]}},watch:{showMenuTree:function(e){e||this.getCheckMenu()}},created:function(){this.getAdminsetJuList()},methods:{getAdminsetJuList:function(){var e=this;this.listLoading=!0,Object(r["c"])(this.listQuery).then(function(t){e.list=t.data.rows,e.total=t.data.total,setTimeout(function(){e.listLoading=!1},1500)})},selectUser:function(e){"1"===e.type&&(this.temp.uid=e.id,this.temp.userName=e.text,this.showUserTree=!1)},handleSelectionChange:function(e){this.collectList=e},addPeople:function(){this.dialogStatus="create",this.getTree(),this.dialogFormVisible=!0},getTree:function(){var e=this;Object(o["b"])().then(function(t){e.userTreeData=[t.data]}),Object(s["a"])().then(function(t){e.menuTreeData=t.data}),Object(s["c"])().then(function(e){console.log(e.data)})},deleteUser:function(e){var t=this,n=[];e.id?n.push(e.id):this.collectList.length>0?this.collectList.forEach(function(e){n.push(e.id)}):this.$message("请选择需要删除的数据！"),n.length>0&&this.$confirm("此操作将永久删除人员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r["b"])({ids:n.join(",")}).then(function(e){e.data.result?t.$message({type:"success",message:"删除成功!"}):t.$message({type:"info",message:e.data.message}),t.getAdminsetJuList()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},resetTemp:function(){this.temp={}},handleUpdate:function(e){var t=this,n=e.id,a=e.param,i=e.uid;this.temp={id:n,param:a,uid:i},this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},updateData:function(){var e=this;this.$refs["dataForm"].validate(function(t){if(t){var n=Object.assign({},e.temp);Object(s["b"])(n).then(function(t){var n="修改失败",a="info";t.data.result&&(a="success",n="修改成功",e.dialogFormVisible=!1,e.getAdminsetJuList()),e.$message({message:n,type:a})})}})},getCheckMenu:function(){var e=this.$refs.menuTree.getCheckedNodes(),t=[],n=[];e.forEach(function(e){n.push(e.id),t.push(e.text)}),this.temp.param=n.toString(),this.temp.paramName=t.toString()}}},u=c,d=(n("0460"),n("2877")),p=Object(d["a"])(u,a,i,!1,null,"7dcbffe6",null);t["default"]=p.exports},"09f4":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),Math.easeInOutQuad=function(e,t,n,a){return e/=a/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,n){var s=r(),o=e-s,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var r=Math.easeInOutQuad(c,s,o,t);i(r),c<t?a(e):n&&"function"===typeof n&&n()};u()}},a417:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var a=n("b775");function i(){return Object(a["a"])({url:"/app/base/user/tree",method:"get"})}function r(){return Object(a["a"])({url:"/app/base/user/chuTree",method:"get"})}},d87c:function(e,t,n){},d8e5:function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return s}),n.d(t,"e",function(){return o}),n.d(t,"b",function(){return l}),n.d(t,"f",function(){return c});var a=n("b775");function i(e){return Object(a["a"])({url:"/app/xlgl/adminset/list",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/app/xlgl/adminset/juList",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/app/xlgl/adminset/chuList",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/app/xlgl/adminset/saveOrUpdate",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/app/xlgl/adminset/delete",method:"get",params:e})}function c(){return Object(a["a"])({url:"/app/base/user/allTree",method:"get"})}}}]);