(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50114ddc"],{"09f4":function(t,e,a){"use strict";a.d(e,"a",function(){return o}),Math.easeInOutQuad=function(t,e,a,s){return t/=s/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function n(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(t,e,a){var o=i(),l=t-o,r=20,c=0;e="undefined"===typeof e?500:e;var d=function t(){c+=r;var i=Math.easeInOutQuad(c,o,l,e);n(i),c<e?s(t):a&&"function"===typeof a&&a()};d()}},"32a9":function(t,e,a){},"7c64":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],staticClass:"listPage"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"borderSty",attrs:{span:18}},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],on:{"tab-click":t.handleClick},model:{value:t.editableTabsValue,callback:function(e){t.editableTabsValue=e},expression:"editableTabsValue"}},t._l(t.tabsList,function(e,s){return a("el-tab-pane",{key:s,attrs:{label:e.title,name:e.name}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-dropdown",{on:{command:t.handleCommand}},[a("el-button",{attrs:{type:"primary"}},[t._v("\n                排序方式"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1"}},[t._v("发布时间")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"2"}},[t._v("热度")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"3"}},[t._v("发布单位")])],1)],1),t._v(" "),a("el-button",{staticClass:"addBtn noBorder",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addNews}},[t._v("增加")])],1),t._v(" "),t.infoList.length>0?a("div",t._l(t.infoList,function(e,s){return a("el-row",{key:s,staticClass:"grid-content bg-purple divSty",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("img",{attrs:{src:e.picturePath,alt:"",width:"100%",height:"100%"}})])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("div",[a("div",{staticClass:"title"},[a("span",{staticStyle:{cursor:"pointer"},on:{click:t.toDetail}},[t._v(t._s(e.title))]),t._v(" "),e.isTop?a("span",{staticClass:"topSty"},[t._v("置顶")]):t._e()]),t._v(" "),a("div",{staticClass:"content",attrs:{title:e.content},domProps:{innerHTML:t._s(e.content)}}),t._v(" "),a("div",{staticClass:"tally",staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between"}},[a("div",{staticStyle:{color:"#666666"}},[a("span",[t._v(t._s(e.releaseDept))]),t._v(" "),a("span",{staticClass:"ma-l_40"},[t._v(t._s(e.releaseDate))]),t._v(" "),a("span",{staticClass:"ma-l_40"},[t._v(t._s(e.hits?e.hits:0)+"浏览")])]),t._v(" "),a("div",{staticStyle:{color:"#3377FF",cursor:"pointer","font-size":"14px"}},[a("span",{on:{click:function(a){return t.isTop(e)}}},[t._v(t._s(e.isTop?"取消置顶":"置顶"))]),t._v(" "),a("span",{staticClass:"ma-l_15",on:{click:function(a){return t.editorFn(e.id)}}},[t._v("编辑")]),t._v(" "),a("span",{staticClass:"ma-l_15",on:{click:function(a){return t.deleteFn(e.id)}}},[t._v("删除")])])])])])],1)}),1):a("div",{staticStyle:{"text-align":"center",padding:"20px 0",color:"#666666"}},[t._v("暂无数据")])])}),1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.pagesize},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"pagesize",e)},pagination:t.getDataList}})],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-row",[a("el-col",{attrs:{span:24}},t._l(t.otherList,function(e,s){return a("div",{key:s,staticClass:"div2"},[a("el-row",[a("el-col",{staticClass:"imgPosition1",attrs:{span:4}},[a("img",{attrs:{src:e.src,alt:"",width:"100%",height:"100%"}})]),t._v(" "),a("el-col",{attrs:{span:12}},[0===s?a("p",[a("span",[t._v("新闻发布数")]),a("br"),t._v(" "),a("span",{staticStyle:{color:"#999999","font-size":"14px"}},[t._v("本年度全局新闻统计")])]):t._e(),t._v(" "),1===s?a("p",[a("span",[t._v("本月发布新闻")]),a("br"),t._v(" "),a("span",{staticStyle:{color:"#999999","font-size":"14px"}},[t._v("本月全局新闻统计")])]):t._e(),t._v(" "),2===s?a("p",[a("span",[t._v("本周发布动态")]),a("br"),t._v(" "),a("span",{staticStyle:{color:"#999999","font-size":"14px"}},[t._v("本周全局新闻统计")])]):t._e()]),t._v(" "),a("el-col",{staticClass:"numSty",attrs:{span:8}},[t._v("\n                "+t._s(e)+"\n              ")])],1)],1)}),0),t._v(" "),a("el-col",{staticClass:"borderSty",attrs:{span:24}},[a("div",{staticClass:"div1"},[t._v("\n            各单位发布统计\n            "),a("el-dropdown",{on:{command:t.handleCommandDate}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n                "+t._s(t.COMMAND_LIST[t.commandDate])),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"year"}},[t._v("本年")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"month"}},[t._v("本月")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"week"}},[t._v("本周")])],1)],1)],1),t._v(" "),a("div",[a("ul",{staticClass:"ulSty"},t._l(t.departList,function(e,s){return a("li",{key:s},[a("el-row",[a("el-col",{attrs:{span:12}},[t._v(t._s(e.releaseOrgan))]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v(t._s(e.nums)+"条")]),t._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[a("a",{staticClass:"normal_a",class:{isWatch:e.isWatch},attrs:{href:""}},[t._v("查看")])])],1)],1)}),0)])])],1)],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdd,expression:"showAdd"}],staticClass:"addPage"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"borderSty",staticStyle:{"padding-bottom":"100px"}},[a("div",{staticClass:"addTitle"},[a("span",[t._v("训管动态新增")]),t._v(" "),a("span",{staticStyle:{cursor:"pointer"},on:{click:t.backFn}},[t._v("返回")])]),t._v(" "),a("div",{staticStyle:{padding:"20px 0"}},[a("el-form",{ref:"form",staticClass:"oraganForm",attrs:{model:t.form,"label-width":"300px"}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"动态类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.newsType,callback:function(e){t.$set(t.form,"newsType",e)},expression:"form.newsType"}},[a("el-option",{attrs:{label:"上级工作动态",value:"上级工作动态"}}),t._v(" "),a("el-option",{attrs:{label:"机关部队训练风采",value:"机关部队训练风采"}}),t._v(" "),a("el-option",{attrs:{label:"安全管理",value:"安全管理"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"发布单位",required:""}},[a("el-input",{attrs:{disabled:""},model:{value:t.form.deptName,callback:function(e){t.$set(t.form,"deptName",e)},expression:"form.deptName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"动态标题"}},[a("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"发布时间"}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{prop:"examineStartDateStr"}},[a("el-date-picker",{attrs:{type:"datetime","picker-options":t.pickOptionStart,placeholder:"请选择发布时间"},model:{value:t.form.createDate,callback:function(e){t.$set(t.form,"createDate",e)},expression:"form.createDate"}})],1)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"编辑内容"}},[a("ueditor",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"上传封面"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",limit:1,action:"/xlgl/xlgldocumentfile/upLoadFile","on-success":t.uploadFn,name:"pdf","list-type":"picture",multiple:""}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png/gif格式文件，且不超过500kb")])])],1)],1)],1)],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"center","margin-top":"30px"},attrs:{span:24}},[a("el-button",{attrs:{type:"success"},on:{click:t.saveFn}},[t._v("发布")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"}},[t._v("存草稿")])],1)],1)],1)],1)])},n=[],i=(a("c5f6"),a("b775"));function o(t){return Object(i["a"])({url:"/app/xlgl/news/queryTotal",method:"get",params:t})}function l(t){return Object(i["a"])({url:"/app/xlgl/news/delete",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/app/xlgl/news/top",method:"get",params:t})}function c(t){return Object(i["a"])({url:"/app/xlgl/news/topCancle",method:"get",params:t})}function d(t){return Object(i["a"])({url:"/app/xlgl/news/list",method:"get",params:t})}function p(t){return Object(i["a"])({url:"/app/xlgl/news/saveOrUpdate",method:"post",data:t})}function u(){return Object(i["a"])({url:"/app/xlgl/news/getDeptName",method:"get"})}var m=a("333d"),v=a("63f4"),f={name:"ComplexTable",components:{Pagination:m["a"],Ueditor:v["a"]},data:function(){var t=this;return{editableTabsValue:"1",command:"",commandDate:"month",infoList:[],departList:[],otherList:[],COMMAND_LIST:{year:"本年",month:"本月",week:"本周"},listQuery:{page:1,pagesize:10},tabsList:[{title:"上级工作动态",name:"1"},{title:"机关部队训练风采",name:"2"},{title:"安全管理",name:"3"}],tabIndex:0,isLoading:!1,total:0,showAdd:!1,showList:!0,form:{title:"",newsType:"",createDate:"",picturePath:"",content:"",deptName:""},pickOptionStart:{disabledDate:function(e){var a=t.form.examineEndDateStr;if(a)return e.getTime()>new Date(a).getTime()}}}},created:function(){this.getQueryTotal(this.commandDate),this.getDataList(this.tabIndex)},methods:{handleCommand:function(t){this.command=t},handleCommandDate:function(t){this.commandDate=t,this.getQueryTotal(this.commandDate)},handleClick:function(t,e){this.tabIndex=Number(t.index),this.getDataList()},getDataList:function(){var t=this;0===this.tabIndex?this.listQuery.type="上级工作动态":1===this.tabIndex?this.listQuery.type="机关部队训练风采":this.listQuery.type="安全管理",this.isLoading=!0,this.infoList=[],d(this.listQuery).then(function(e){t.infoList=e.data.rows,t.total=e.data.total,setTimeout(function(){t.isLoading=!1},1500)})},getQueryTotal:function(t){var e=this;o({type:t}).then(function(a){e.otherList=[],e.otherList.push(a.data.totalYear),e.otherList.push(a.data.totalMonth),e.otherList.push(a.data.totalWeek),e.departList="year"===t?a.data.totalYearByOrgan:"month"===t?a.data.totalMonthByOrgan:a.data.totalWeekByOrgan})},addNews:function(){this.showList=!1,this.showAdd=!0,this.getDeptName()},getDeptName:function(){var t=this;u().then(function(e){t.form.deptName=e.data.deptName})},backFn:function(){this.showList=!0,this.showAdd=!1},isTop:function(t){var e=this;t.isTop?c({id:t.id}).then(function(t){"success"===t.data.result?(e.$message({type:"success",message:"取消置顶成功!"}),e.getDataList()):e.$message({type:"info",message:"取消置顶失败!"})}):r({id:t.id}).then(function(t){"success"===t.data.result?(e.$message({type:"success",message:"置顶成功!"}),e.getDataList()):e.$message({type:"info",message:"置顶失败!"})})},deleteFn:function(t){var e=this;l({ids:t}).then(function(t){"success"===t.data.result?(e.$message({type:"success",message:"删除成功!"}),e.getDataList()):e.$message({type:"info",message:"删除失败!"})})},editorFn:function(){},toDetail:function(){},uploadFn:function(t){this.form.picturePath="/xlgl/xlgldocumentfile/downLoad?fileId="+t.fileId},saveFn:function(){var t=this;this.form.isRelease=1,p(this.form).then(function(e){"success"===e.data.result?(t.$message({type:"success",message:"发布成功!"}),t.showList=!0,t.showAdd=!1,t.getDataList()):(t.$message({type:"info",message:"发布失败!"}),t.showList=!0,t.showAdd=!1)})}}},h=f,_=(a("d167"),a("2877")),g=Object(_["a"])(h,s,n,!1,null,"00a58136",null);e["default"]=g.exports},d167:function(t,e,a){"use strict";var s=a("32a9"),n=a.n(s);n.a}}]);