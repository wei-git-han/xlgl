<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.css.app.xlgl.dao.XlglHomepageSportsDao">

	<select id="queryObject" resultType="com.css.app.xlgl.entity.XlglHomepageSports">
		select * from XLGL_HOMEPAGE_SPORTS where id = #{value}
	</select>

	<select id="queryList" resultType="com.css.app.xlgl.entity.XlglHomepageSports">
		select * from (select * from ( select *
		from
		XLGL_HOMEPAGE_SPORTS
		where
		id in
		(
		select
		t1.id
		from
		XLGL_HOMEPAGE_SPORTS t1,
		XLGL_HOMEPAGE_SPORTS_PERSON t2
		where
		t1.id      = t2.SPORTS_ID
		and t2.USER_ID = #{userId} order by t1.CREATE_DATE desc
		)

		union all

		select
		*
		from
		XLGL_HOMEPAGE_SPORTS
		where
		id not in
		(
		select
		t1.id
		from
		XLGL_HOMEPAGE_SPORTS t1,
		XLGL_HOMEPAGE_SPORTS_PERSON t2
		where
		t1.id      = t2.SPORTS_ID
		and t2.USER_ID = #{userId}
		)
		)) where 1=1
		<if test="zjcg != null and zjcg !=''">
			and status  = '1'
		</if>
		<if test="bmz != null and bmz !=''">
			and status = '0'
		</if>
		<if test="ybm != null and ybm !=''">

		</if>
		<if test="time != null and time !=''">
			and UPDATE_DATE >= to_date(#{time},'yyyy-mm-dd HH24:mi')
		</if>
		<if test="projectName != null and projectName !=''">
			and SPORTS_NAME like  '%'||#{projectName}||'%'
		</if>

		<if test="offset != null and limit != null">
			limit #{offset}, #{limit}
		</if>
		order by CREATE_DATE desc
	</select>
	
 	<select id="queryTotal" resultType="int">
		select count(*) from XLGL_HOMEPAGE_SPORTS 
	</select>
	 
	<insert id="save" parameterType="com.css.app.xlgl.entity.XlglHomepageSports">
		insert into XLGL_HOMEPAGE_SPORTS
		(
			"id", 
			"CREATE_USER", 
			"SPORTS_END_TIME", 
			"UPDATE_DATE", 
			"HAVE_NUMBER", 
			"STATUS", 
			"SPORTS_START_TIME", 
			"PlACE", 
			"UPDATE_USER", 
			"CREATE_DATE", 
			"NEED_NUMBER", 
			"SPORTS_NAME", 
			"CONTENT",
			"ORG_NAME",
			"PEOPLES"
		)
		values
		(
			#{id}, 
			#{createUser}, 
			#{sportsEndTime}, 
			#{updateDate}, 
			#{haveNumber}, 
			#{status}, 
			#{sportsStartTime}, 
			#{place}, 
			#{updateUser}, 
			#{createDate}, 
			#{needNumber}, 
			#{sportsName}, 
			#{content},
			#{orgName},
			#{peoples}
		)
	</insert>
	 
	<update id="update" parameterType="com.css.app.xlgl.entity.XlglHomepageSports">
		update XLGL_HOMEPAGE_SPORTS 
		<set>
			<if test="createUser != null">"CREATE_USER" = #{createUser}, </if>
			<if test="sportsEndTime != null">"SPORTS_END_TIME" = #{sportsEndTime}, </if>
			<if test="updateDate != null">"UPDATE_DATE" = #{updateDate}, </if>
			<if test="haveNumber != null">"HAVE_NUMBER" = #{haveNumber}, </if>
			<if test="status != null">"STATUS" = #{status}, </if>
			<if test="sportsStartTime != null">"SPORTS_START_TIME" = #{sportsStartTime}, </if>
			<if test="place != null">"PlACE" = #{place}, </if>
			<if test="updateUser != null">"UPDATE_USER" = #{updateUser}, </if>
			<if test="createDate != null">"CREATE_DATE" = #{createDate}, </if>
			<if test="needNumber != null">"NEED_NUMBER" = #{needNumber}, </if>
			<if test="sportsName != null">"SPORTS_NAME" = #{sportsName}, </if>
			<if test="content != null">"CONTENT" = #{content},</if>
			<if test="orgName != null">"ORG_NAME" = #{orgName},</if>
			<if test="peoples != null">"PEOPLES" = #{peoples}</if>
		</set>
		where id = #{id}
	</update>
	
	<delete id="delete">
		delete from XLGL_HOMEPAGE_SPORTS where id = #{value}
	</delete>
	
	<delete id="deleteBatch">
		delete from XLGL_HOMEPAGE_SPORTS where id in 
		<foreach item="id" collection="array" open="(" separator="," close=")">
			#{id}
		</foreach>
	</delete>

</mapper>