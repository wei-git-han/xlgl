<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.css.app.xlgl.tzxm.dao.SomatoTzDao">

	<resultMap type='com.css.app.xlgl.tzxm.entity.SoldierTz' id="SoldierTz">
	<result property="height" column="height"/>
	<result property="min_weight" column="min_weight"/>
	<result property="max_weight" column="max_weight"/>
	<result property="min_age" column="min_age"/>
	<result property="max_age" column="max_age"/>
	<result property="sex" column="sex"/>
	<result property="MIN_BMI" column="MIN_BMI"/>
	<result property="MAX_BMI" column="MAX_BMI"/>
	</resultMap>
	
	<select id = "selectBMI" resultMap = "SoldierTz">
		select * from SS_SOLDIER_SOMATOTYPE where #{weight} between
		(select min_weight from SS_SOLDIER_SOMATOTYPE where height = #{height} and sex = #{sex} and #{age} between min_age and max_age)
		and 
		(select max_weight from SS_SOLDIER_SOMATOTYPE where height = #{height} and sex = #{sex} and #{age} between min_age and max_age) 
		and height = #{height} and sex = #{sex} and #{age} between min_age and max_age
	</select>
	
</mapper>